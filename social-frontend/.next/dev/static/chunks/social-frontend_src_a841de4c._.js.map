{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/vishalsharma/Downloads/Social-Media-FullStack/social-frontend/src/lib/auth.ts"],"sourcesContent":["// lib/auth.ts\nimport Cookies from \"js-cookie\";\nimport { LoginResponse, User } from \"./types\";\n\nexport const auth = {\n    // Save user session after login\n    setSession: (data: LoginResponse) => {\n        Cookies.set(\"token\", data.token, {\n            expires: 7, // 7 days\n            sameSite: \"lax\", // CSRF protection\n            secure: process.env.NODE_ENV === \"production\", // HTTPS only in production\n        });\n        Cookies.set(\"userId\", data.userId, { expires: 7, sameSite: \"lax\" });\n        Cookies.set(\"username\", data.username, { expires: 7, sameSite: \"lax\" });\n    },\n\n    // Clear session on logout\n    clearSession: () => {\n        Cookies.remove(\"token\");\n        Cookies.remove(\"userId\");\n        Cookies.remove(\"username\");\n    },\n\n    // Get current user info from cookies\n    getUser: (): Partial<User> | null => {\n        const userId = Cookies.get(\"userId\");\n        const username = Cookies.get(\"username\");\n\n        if (!userId || !username) return null;\n\n        return { id: userId, username };\n    },\n\n    // Check if user is authenticated\n    isAuthenticated: (): boolean => {\n        return !!Cookies.get(\"token\");\n    },\n\n    // Get token\n    getToken: (): string | undefined => {\n        return Cookies.get(\"token\");\n    },\n};\n"],"names":[],"mappings":"AAAA,cAAc;;;;;AAUM;AATpB;;AAGO,MAAM,OAAO;IAChB,gCAAgC;IAChC,YAAY,CAAC;QACT,yLAAO,CAAC,GAAG,CAAC,SAAS,KAAK,KAAK,EAAE;YAC7B,SAAS;YACT,UAAU;YACV,QAAQ,oDAAyB;QACrC;QACA,yLAAO,CAAC,GAAG,CAAC,UAAU,KAAK,MAAM,EAAE;YAAE,SAAS;YAAG,UAAU;QAAM;QACjE,yLAAO,CAAC,GAAG,CAAC,YAAY,KAAK,QAAQ,EAAE;YAAE,SAAS;YAAG,UAAU;QAAM;IACzE;IAEA,0BAA0B;IAC1B,cAAc;QACV,yLAAO,CAAC,MAAM,CAAC;QACf,yLAAO,CAAC,MAAM,CAAC;QACf,yLAAO,CAAC,MAAM,CAAC;IACnB;IAEA,qCAAqC;IACrC,SAAS;QACL,MAAM,SAAS,yLAAO,CAAC,GAAG,CAAC;QAC3B,MAAM,WAAW,yLAAO,CAAC,GAAG,CAAC;QAE7B,IAAI,CAAC,UAAU,CAAC,UAAU,OAAO;QAEjC,OAAO;YAAE,IAAI;YAAQ;QAAS;IAClC;IAEA,iCAAiC;IACjC,iBAAiB;QACb,OAAO,CAAC,CAAC,yLAAO,CAAC,GAAG,CAAC;IACzB;IAEA,YAAY;IACZ,UAAU;QACN,OAAO,yLAAO,CAAC,GAAG,CAAC;IACvB;AACJ"}},
    {"offset": {"line": 61, "column": 0}, "map": {"version":3,"sources":["file:///Users/vishalsharma/Downloads/Social-Media-FullStack/social-frontend/src/lib/api.ts"],"sourcesContent":["// lib/api.ts\nimport axios from \"axios\";\nimport Cookies from \"js-cookie\";\n\nconst api = axios.create({\n    baseURL: \"http://localhost:8080\",\n    timeout: 60000, // 60 seconds for file uploads\n    // ❌ REMOVE this - it breaks multipart/form-data\n    // headers: {\n    //     \"Content-Type\": \"application/json\",\n    // },\n});\n\n// Request interceptor\napi.interceptors.request.use(\n    (config) => {\n        const token = Cookies.get(\"token\");\n        const userId = Cookies.get(\"userId\");\n\n        if (token) {\n            config.headers[\"Authorization\"] = `Bearer ${token}`;\n        }\n\n        if (userId) {\n            config.headers[\"X-User-Id\"] = userId;\n        }\n\n        // ✅ Only set Content-Type for non-FormData requests\n        if (!(config.data instanceof FormData)) {\n            config.headers[\"Content-Type\"] = \"application/json\";\n        }\n\n        return config;\n    },\n    (error) => {\n        return Promise.reject(error);\n    }\n);\n\n// Response interceptor\napi.interceptors.response.use(\n    (response) => response,\n    (error) => {\n        if (error.response?.status === 401) {\n            Cookies.remove(\"token\");\n            Cookies.remove(\"userId\");\n            Cookies.remove(\"username\");\n            window.location.href = \"/login\";\n        }\n        return Promise.reject(error);\n    }\n);\n\nexport default api;"],"names":[],"mappings":"AAAA,aAAa;;;;;AACb;AACA;;;AAEA,MAAM,MAAM,yKAAK,CAAC,MAAM,CAAC;IACrB,SAAS;IACT,SAAS;AAKb;AAEA,sBAAsB;AACtB,IAAI,YAAY,CAAC,OAAO,CAAC,GAAG,CACxB,CAAC;IACG,MAAM,QAAQ,yLAAO,CAAC,GAAG,CAAC;IAC1B,MAAM,SAAS,yLAAO,CAAC,GAAG,CAAC;IAE3B,IAAI,OAAO;QACP,OAAO,OAAO,CAAC,gBAAgB,GAAG,CAAC,OAAO,EAAE,OAAO;IACvD;IAEA,IAAI,QAAQ;QACR,OAAO,OAAO,CAAC,YAAY,GAAG;IAClC;IAEA,oDAAoD;IACpD,IAAI,CAAC,CAAC,OAAO,IAAI,YAAY,QAAQ,GAAG;QACpC,OAAO,OAAO,CAAC,eAAe,GAAG;IACrC;IAEA,OAAO;AACX,GACA,CAAC;IACG,OAAO,QAAQ,MAAM,CAAC;AAC1B;AAGJ,uBAAuB;AACvB,IAAI,YAAY,CAAC,QAAQ,CAAC,GAAG,CACzB,CAAC,WAAa,UACd,CAAC;IACG,IAAI,MAAM,QAAQ,EAAE,WAAW,KAAK;QAChC,yLAAO,CAAC,MAAM,CAAC;QACf,yLAAO,CAAC,MAAM,CAAC;QACf,yLAAO,CAAC,MAAM,CAAC;QACf,OAAO,QAAQ,CAAC,IAAI,GAAG;IAC3B;IACA,OAAO,QAAQ,MAAM,CAAC;AAC1B;uCAGW"}},
    {"offset": {"line": 110, "column": 0}, "map": {"version":3,"sources":["file:///Users/vishalsharma/Downloads/Social-Media-FullStack/social-frontend/src/app/%28app%29/layout.tsx"],"sourcesContent":["// app/(app)/layout.tsx\n\"use client\";\nimport { useEffect, useState } from \"react\";\nimport { useRouter } from \"next/navigation\";\nimport Link from \"next/link\";\nimport { auth } from \"@/lib/auth\";\nimport api from \"@/lib/api\";\n\nexport default function AppLayout({ children }: { children: React.ReactNode }) {\n    const router = useRouter();\n    const [isReady, setIsReady] = useState(false);\n    const [unreadNotifications, setUnreadNotifications] = useState(0);\n    const currentUser = auth.getUser();\n\n    // Auth guard - redirect to login if not authenticated\n    useEffect(() => {\n        if (!auth.isAuthenticated()) {\n            router.replace(\"/login\");\n        } else {\n            setIsReady(true);\n            loadUnreadCount();\n        }\n    }, [router]);\n\n    const loadUnreadCount = async () => {\n        try {\n            const res = await api.get<{ count: number }>(\"/api/notifications/unread-count\");\n            setUnreadNotifications(res.data.count);\n        } catch (error) {\n            console.error(\"Failed to load unread count:\", error);\n        }\n    };\n\n    const handleLogout = () => {\n        auth.clearSession();\n        router.push(\"/login\");\n    };\n\n    if (!isReady) {\n        return (\n            <div className=\"min-h-screen flex items-center justify-center\">\n                <div className=\"text-gray-600\">Loading...</div>\n            </div>\n        );\n    }\n\n    return (\n        <div className=\"min-h-screen bg-surface-50 flex flex-col\">\n            {/* Navigation Header */}\n            <header className=\"bg-white/80 backdrop-blur-md border-b border-surface-100 sticky top-0 z-50\">\n                <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n                    <div className=\"flex items-center justify-between h-16\">\n                        <div className=\"flex items-center space-x-8\">\n                            <Link href=\"/feed\" className=\"text-2xl font-black text-primary-600 tracking-tight hover:scale-105 transition-transform\">\n                                SOCIAL\n                            </Link>\n\n                            <nav className=\"hidden md:flex items-center space-x-1\">\n                                <Link\n                                    href=\"/feed\"\n                                    className=\"text-surface-600 hover:text-primary-600 hover:bg-primary-50 px-4 py-2 rounded-xl transition-all font-medium\"\n                                >\n                                    Feed\n                                </Link>\n                                <Link\n                                    href=\"/notifications\"\n                                    className=\"text-surface-600 hover:text-primary-600 hover:bg-primary-50 px-4 py-2 rounded-xl transition-all font-medium relative\"\n                                >\n                                    Notifications\n                                    {unreadNotifications > 0 && (\n                                        <span className=\"absolute top-1.5 right-1 bg-red-500 text-white text-[10px] font-bold rounded-full h-4 min-w-[16px] px-1 flex items-center justify-center border-2 border-white\">\n                                            {unreadNotifications}\n                                        </span>\n                                    )}\n                                </Link>\n                                <Link\n                                    href=\"/messages\"\n                                    className=\"text-surface-600 hover:text-primary-600 hover:bg-primary-50 px-4 py-2 rounded-xl transition-all font-medium\"\n                                >\n                                    Messages\n                                </Link>\n                                <Link\n                                    href=\"/discover\"\n                                    className=\"text-surface-600 hover:text-primary-600 hover:bg-primary-50 px-4 py-2 rounded-xl transition-all font-medium\"\n                                >\n                                    Discover\n                                </Link>\n                            </nav>\n                        </div>\n\n\n                        <div className=\"flex items-center space-x-4\">\n                            <Link\n                                href={`/profile/${currentUser?.username}`}\n                                className=\"flex items-center space-x-2 text-surface-700 hover:text-primary-600 bg-surface-100/50 hover:bg-primary-50 px-3 py-1.5 rounded-full transition-all group\"\n                            >\n                                <div className=\"w-7 h-7 bg-primary-100 rounded-full flex items-center justify-center text-primary-600 font-bold text-xs\">\n                                    {currentUser?.username?.charAt(0).toUpperCase()}\n                                </div>\n                                <span className=\"font-semibold text-sm\">@{currentUser?.username}</span>\n                            </Link>\n                            <div className=\"h-6 w-px bg-surface-200\" />\n                            <button\n                                onClick={handleLogout}\n                                className=\"text-surface-400 hover:text-red-500 p-2 rounded-lg hover:bg-red-50 transition-all\"\n                                title=\"Logout\"\n                            >\n                                <span className=\"text-xl\">⏻</span>\n                            </button>\n                        </div>\n                    </div>\n                </div>\n            </header>\n\n            {/* Main Content */}\n            <main className=\"flex-grow max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 w-full\">\n                <div className=\"animate-in\">\n                    {children}\n                </div>\n            </main>\n        </div>\n    );\n}\n\n"],"names":["useEffect","useState","useRouter","Link","auth","api","AppLayout","children","React","ReactNode","router","isReady","setIsReady","unreadNotifications","setUnreadNotifications","currentUser","getUser","isAuthenticated","replace","loadUnreadCount","res","get","count","data","error","console","handleLogout","clearSession","push","username","charAt","toUpperCase"],"mappings":"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","ignoreList":[]}}]
}