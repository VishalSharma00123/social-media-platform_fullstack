{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/vishalsharma/Downloads/Social-Media-FullStack/social-frontend/src/components/CreatePost.tsx"],"sourcesContent":["// components/CreatePost.tsx\n\"use client\";\nimport { useState, FormEvent, ChangeEvent } from \"react\";\nimport api from \"@/lib/api\";\n\ninterface Props {\n    onPostCreated: () => void;\n}\n\nexport default function CreatePost({ onPostCreated }: Props) {\n    const [content, setContent] = useState(\"\");\n    const [postType, setPostType] = useState<\"TEXT\" | \"IMAGE\" | \"VIDEO\">(\"TEXT\");\n    const [images, setImages] = useState<FileList | null>(null);\n    const [video, setVideo] = useState<File | null>(null);\n    const [loading, setLoading] = useState(false);\n    const [error, setError] = useState(\"\");\n\n    const handleSubmit = async (e: FormEvent) => {\n        e.preventDefault();\n        if (!content.trim()) {\n            setError(\"Content cannot be empty\");\n            return;\n        }\n\n        setLoading(true);\n        setError(\"\");\n\n        try {\n            const formData = new FormData();\n\n            const requestBlob = new Blob(\n                [JSON.stringify({ content, postType })],\n                { type: \"application/json\" }\n            );\n            formData.append(\"request\", requestBlob);\n\n            if (images && postType === \"IMAGE\") {\n                Array.from(images).forEach((file) => {\n                    formData.append(\"images\", file);\n                });\n            }\n\n            if (video && postType === \"VIDEO\") {\n                formData.append(\"video\", video);\n            }\n\n            // ‚úÖ Don't set Content-Type manually for FormData\n            const response = await api.post(\"/api/posts\", formData);\n\n            console.log(\"Post created:\", response.data);\n\n            setContent(\"\");\n            setImages(null);\n            setVideo(null);\n            setPostType(\"TEXT\");\n            onPostCreated();\n        } catch (err: any) {\n            console.error(\"Error:\", err.response?.data || err.message);\n            setError(err.response?.data?.message || \"Failed to create post\");\n        } finally {\n            setLoading(false);\n        }\n    };\n    const handleImageChange = (e: ChangeEvent<HTMLInputElement>) => {\n        setImages(e.target.files);\n        setPostType(\"IMAGE\");\n    };\n\n    const handleVideoChange = (e: ChangeEvent<HTMLInputElement>) => {\n        const file = e.target.files?.[0];\n        setVideo(file || null);\n        setPostType(\"VIDEO\");\n    };\n\n    return (\n        <div className=\"card p-5 mb-8 shadow-md border-surface-200 bg-white\">\n            <form onSubmit={handleSubmit} className=\"space-y-4\">\n                <div className=\"flex space-x-4\">\n                    <div className=\"w-10 h-10 bg-primary-100 rounded-full flex-shrink-0 flex items-center justify-center text-primary-600 font-bold\">\n                        {/* Avatar placeholder or user inital */}\n                        ?\n                    </div>\n                    <textarea\n                        value={content}\n                        onChange={(e) => setContent(e.target.value)}\n                        placeholder=\"What's happening?\"\n                        rows={2}\n                        className=\"w-full bg-transparent border-none focus:ring-0 text-lg placeholder-surface-400 resize-none pt-2\"\n                    />\n                </div>\n\n                <div className=\"flex items-center justify-between pt-3 border-t border-surface-100\">\n                    <div className=\"flex items-center space-x-2\">\n                        <label className=\"flex items-center space-x-2 cursor-pointer p-2 hover:bg-primary-50 rounded-xl transition-all group\">\n                            <input\n                                type=\"file\"\n                                multiple\n                                accept=\"image/*\"\n                                onChange={handleImageChange}\n                                className=\"hidden\"\n                            />\n                            <span className=\"text-xl group-hover:scale-110 transition-transform\">üñºÔ∏è</span>\n                            <span className=\"text-sm font-semibold text-surface-600 group-hover:text-primary-600\">Photo</span>\n                        </label>\n\n                        <label className=\"flex items-center space-x-2 cursor-pointer p-2 hover:bg-blue-50 rounded-xl transition-all group\">\n                            <input\n                                type=\"file\"\n                                accept=\"video/*\"\n                                onChange={handleVideoChange}\n                                className=\"hidden\"\n                            />\n                            <span className=\"text-xl group-hover:scale-110 transition-transform\">üé•</span>\n                            <span className=\"text-sm font-semibold text-surface-600 group-hover:text-blue-600\">Video</span>\n                        </label>\n                    </div>\n\n                    <button\n                        type=\"submit\"\n                        disabled={loading || !content.trim()}\n                        className=\"btn-primary px-6 py-2 rounded-full font-bold disabled:bg-surface-200 disabled:text-surface-400\"\n                    >\n                        {loading ? \"...\" : \"Post\"}\n                    </button>\n                </div>\n\n                {(images || video) && (\n                    <div className=\"bg-surface-50 p-3 rounded-xl flex items-center justify-between border border-surface-200 animate-in\">\n                        <div className=\"flex items-center space-x-2 text-sm text-surface-600 font-medium\">\n                            {images ? (\n                                <><span>üì∏</span> <span>{images.length} images selected</span></>\n                            ) : (\n                                <><span>üé¨</span> <span>{video?.name}</span></>\n                            )}\n                        </div>\n                        <button\n                            type=\"button\"\n                            onClick={() => { setImages(null); setVideo(null); setPostType(\"TEXT\"); }}\n                            className=\"text-red-500 hover:bg-red-50 p-1 rounded-lg\"\n                        >\n                            ‚úï\n                        </button>\n                    </div>\n                )}\n\n                {error && (\n                    <div className=\"bg-red-50 text-red-600 text-xs p-2 rounded-lg border border-red-100\">\n                        {error}\n                    </div>\n                )}\n            </form>\n        </div>\n    );\n}\n\n"],"names":["useState","FormEvent","ChangeEvent","api","Props","onPostCreated","CreatePost","content","setContent","postType","setPostType","images","setImages","FileList","video","setVideo","File","loading","setLoading","error","setError","handleSubmit","e","preventDefault","trim","formData","FormData","requestBlob","Blob","JSON","stringify","type","append","Array","from","forEach","file","response","post","console","log","data","err","message","handleImageChange","HTMLInputElement","target","files","handleVideoChange","value","length","name"],"mappings":"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","ignoreList":[]}},
    {"offset": {"line": 310, "column": 0}, "map": {"version":3,"sources":["file:///Users/vishalsharma/Downloads/Social-Media-FullStack/social-frontend/src/components/PostCard.tsx"],"sourcesContent":["// components/PostCard.tsx\n\"use client\";\nimport { useState } from \"react\";\nimport { Post } from \"@/lib/types\";\nimport api from \"@/lib/api\";\n\ninterface Props {\n    post: Post;\n    onUpdate: (updatedPost: Post) => void;\n}\n\nexport default function PostCard({ post, onUpdate }: Props) {\n    const [comment, setComment] = useState(\"\");\n    const [showComments, setShowComments] = useState(false);\n\n    // ‚úÖ ADD THIS: Build full URL for media\n    const getMediaUrl = (path: string) => {\n        if (!path) return \"\";\n        if (path.startsWith(\"http\")) return path;\n        return `http://localhost:8082${path}`; // Post Service URL\n    };\n\n    const toggleLike = async () => {\n        try {\n            const endpoint = `/api/posts/${post.id}/like`;\n            const response = post.isLiked\n                ? await api.delete<Post>(endpoint)\n                : await api.post<Post>(endpoint);\n            onUpdate(response.data);\n        } catch (error) {\n            console.error(\"Failed to toggle like:\", error);\n        }\n    };\n\n    const addComment = async () => {\n        if (!comment.trim()) return;\n        try {\n            const response = await api.post<Post>(`/api/posts/${post.id}/comments`, {\n                content: comment,\n            });\n            setComment(\"\");\n            onUpdate(response.data);\n        } catch (error) {\n            console.error(\"Failed to add comment:\", error);\n        }\n    };\n\n    // ‚úÖ FIX: Use post.images instead of post.imageUrls\n    const images = post.images || [];\n    const video = post.video || post.videoUrl;\n\n    return (\n        <div className=\"card mb-6 animate-in bg-white border-surface-200\">\n            {/* Header */}\n            <div className=\"p-4 flex items-center justify-between\">\n                <div className=\"flex items-center\">\n                    <div className=\"w-10 h-10 rounded-full bg-primary-100 flex items-center justify-center text-primary-600 font-bold overflow-hidden mr-3\">\n                        {post.userProfilePicture ? (\n                            <img\n                                src={getMediaUrl(post.userProfilePicture)}\n                                alt={post.username}\n                                className=\"w-full h-full object-cover\"\n                            />\n                        ) : (\n                            post.username.charAt(0).toUpperCase()\n                        )}\n                    </div>\n                    <div>\n                        <p className=\"font-bold text-surface-900 leading-tight hover:underline cursor-pointer\">\n                            {post.username}\n                        </p>\n                        <p className=\"text-[11px] font-medium text-surface-400 uppercase tracking-wider\">\n                            {new Date(post.createdAt).toLocaleDateString()} ‚Ä¢ {new Date(post.createdAt).toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })}\n                        </p>\n                    </div>\n                </div>\n                <button className=\"text-surface-400 hover:text-surface-600 p-1 rounded-full hover:bg-surface-50 transition-colors\">\n                    <span className=\"text-lg\">‚Ä¢‚Ä¢‚Ä¢</span>\n                </button>\n            </div>\n\n            {/* Content */}\n            <div className=\"px-4 pb-3\">\n                <p className=\"text-surface-800 leading-relaxed whitespace-pre-wrap\">{post.content}</p>\n            </div>\n\n            {/* ‚úÖ FIX: Images - use post.images and getMediaUrl */}\n            {images.length > 0 && (\n                <div className={`grid gap-1 mb-2 px-1 ${images.length > 1 ? 'grid-cols-2' : 'grid-cols-1'}`}>\n                    {images.map((url, idx) => (\n                        <img\n                            key={idx}\n                            src={getMediaUrl(url)}\n                            alt=\"Post content\"\n                            className={`w-full object-cover ${images.length === 1 ? 'max-h-[500px] rounded-lg' : 'h-48 rounded-md hover:opacity-95 transition-opacity'}`}\n                            onError={(e) => {\n                                console.error(\"Image failed to load:\", url);\n                                e.currentTarget.style.display = 'none';\n                            }}\n                        />\n                    ))}\n                </div>\n            )}\n\n            {/* ‚úÖ FIX: Video - use getMediaUrl */}\n            {video && (\n                <div className=\"px-1 mb-2\">\n                    <video controls className=\"w-full rounded-lg max-h-[500px] bg-black\">\n                        <source src={getMediaUrl(video)} />\n                    </video>\n                </div>\n            )}\n\n            {/* Actions */}\n            <div className=\"px-4 py-3 flex items-center justify-between border-t border-surface-50\">\n                <div className=\"flex items-center space-x-1\">\n                    <button\n                        onClick={toggleLike}\n                        className={`flex items-center space-x-2 px-3 py-1.5 rounded-full transition-all ${post.isLiked\n                            ? \"bg-red-50 text-red-600 font-bold\"\n                            : \"text-surface-600 hover:bg-red-50 hover:text-red-500\"\n                            }`}\n                    >\n                        <span className=\"text-lg\">{post.isLiked ? \"‚ù§Ô∏è\" : \"ü§ç\"}</span>\n                        <span className=\"text-sm\">{post.likesCount}</span>\n                    </button>\n\n                    <button\n                        onClick={() => setShowComments(!showComments)}\n                        className={`flex items-center space-x-2 px-3 py-1.5 rounded-full transition-all ${showComments\n                            ? \"bg-primary-50 text-primary-600 font-bold\"\n                            : \"text-surface-600 hover:bg-primary-50 hover:text-primary-600\"\n                            }`}\n                    >\n                        <span className=\"text-lg\">üí¨</span>\n                        <span className=\"text-sm\">{post.commentsCount}</span>\n                    </button>\n\n                    <button className=\"flex items-center space-x-2 text-surface-600 hover:bg-green-50 hover:text-green-600 px-3 py-1.5 rounded-full transition-all\">\n                        <span className=\"text-lg\">üîÅ</span>\n                        <span className=\"text-sm\">{post.sharesCount}</span>\n                    </button>\n                </div>\n\n                <button className=\"text-surface-400 hover:text-primary-600 p-2 rounded-full hover:bg-primary-50 transition-all\">\n                    <span>üîñ</span>\n                </button>\n            </div>\n\n            {/* Comments Section */}\n            {showComments && (\n                <div className=\"px-4 pb-4 border-t border-surface-50 bg-surface-50/30\">\n                    <div className=\"pt-4 space-y-3\">\n                        {post.recentComments?.map((c) => (\n                            <div key={c.id} className=\"flex space-x-3 group\">\n                                <div className=\"w-8 h-8 rounded-full bg-surface-200 flex-shrink-0 flex items-center justify-center text-[10px] font-bold\">\n                                    {c.username.charAt(0).toUpperCase()}\n                                </div>\n                                <div className=\"bg-white px-3 py-2 rounded-2xl rounded-tl-none border border-surface-100 shadow-sm flex-grow\">\n                                    <p className=\"text-xs font-bold text-surface-900 mb-0.5\">{c.username}</p>\n                                    <p className=\"text-[13px] text-surface-700\">{c.content}</p>\n                                </div>\n                            </div>\n                        ))}\n                    </div>\n\n                    <div className=\"flex mt-4 items-center space-x-2 bg-white p-1 pl-3 rounded-full border border-surface-200 focus-within:ring-2 focus-within:ring-primary-100 transition-all\">\n                        <input\n                            value={comment}\n                            onChange={(e) => setComment(e.target.value)}\n                            placeholder=\"Write a comment...\"\n                            className=\"flex-grow bg-transparent border-none focus:ring-0 text-sm py-1.5\"\n                        />\n                        <button\n                            onClick={addComment}\n                            disabled={!comment.trim()}\n                            className=\"bg-primary-600 text-white p-2 rounded-full hover:bg-primary-700 disabled:bg-surface-200 transition-colors\"\n                        >\n                            <span className=\"block scale-75\">‚û§</span>\n                        </button>\n                    </div>\n                </div>\n            )}\n        </div>\n    );\n}"],"names":["useState","Post","api","Props","post","onUpdate","updatedPost","PostCard","comment","setComment","showComments","setShowComments","getMediaUrl","path","startsWith","toggleLike","endpoint","id","response","isLiked","delete","data","error","console","addComment","trim","content","images","video","videoUrl","userProfilePicture","username","charAt","toUpperCase","Date","createdAt","toLocaleDateString","toLocaleTimeString","hour","minute","length","map","url","idx","e","currentTarget","style","display","likesCount","commentsCount","sharesCount","recentComments","c","target","value"],"mappings":"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","ignoreList":[]}},
    {"offset": {"line": 718, "column": 0}, "map": {"version":3,"sources":["file:///Users/vishalsharma/Downloads/Social-Media-FullStack/social-frontend/src/app/%28app%29/feed/page.tsx"],"sourcesContent":["// app/(app)/feed/page.tsx\n\"use client\";\nimport { useEffect, useState } from \"react\";\nimport api from \"@/lib/api\";\nimport { Post, PageResponse } from \"@/lib/types\";\nimport CreatePost from \"@/components/CreatePost\";\nimport PostCard from \"@/components/PostCard\";\n\nexport default function FeedPage() {\n    const [posts, setPosts] = useState<Post[]>([]);\n    const [loading, setLoading] = useState(true);\n    const [page, setPage] = useState(0);\n    const [hasMore, setHasMore] = useState(true);\n\n    const loadFeed = async (pageNum: number = 0) => {\n        try {\n            const response = await api.get<PageResponse<Post>>(\"/api/posts/feed\", {\n                params: { page: pageNum, size: 20 },\n            });\n\n            if (pageNum === 0) {\n                setPosts(response.data.content);\n            } else {\n                setPosts((prev) => [...prev, ...response.data.content]);\n            }\n\n            setHasMore(response.data.number < response.data.totalPages - 1);\n        } catch (error) {\n            console.error(\"Failed to load feed:\", error);\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    useEffect(() => {\n        loadFeed(0);\n    }, []);\n\n    const handlePostUpdate = (updatedPost: Post) => {\n        setPosts((prev) =>\n            prev.map((p) => (p.id === updatedPost.id ? updatedPost : p))\n        );\n    };\n\n    const loadMore = () => {\n        const nextPage = page + 1;\n        setPage(nextPage);\n        loadFeed(nextPage);\n    };\n\n    if (loading) {\n        return (\n            <div className=\"flex flex-col items-center justify-center py-20 space-y-4\">\n                <div className=\"w-12 h-12 border-4 border-primary-100 border-t-primary-600 rounded-full animate-spin\" />\n                <p className=\"text-surface-500 font-bold uppercase tracking-widest text-xs\">Curating your feed...</p>\n            </div>\n        );\n    }\n\n    return (\n        <div className=\"max-w-2xl mx-auto py-4\">\n            <CreatePost onPostCreated={() => loadFeed(0)} />\n\n            <div className=\"space-y-2\">\n                {posts.map((post) => (\n                    <PostCard key={post.id} post={post} onUpdate={handlePostUpdate} />\n                ))}\n            </div>\n\n            {hasMore && (\n                <div className=\"text-center mt-12 pb-12\">\n                    <button\n                        onClick={loadMore}\n                        className=\"px-8 py-3 bg-white border border-surface-200 text-surface-600 font-bold rounded-full hover:bg-primary-50 hover:text-primary-600 hover:border-primary-200 transition-all shadow-sm active:scale-95\"\n                    >\n                        Load More Posts\n                    </button>\n                </div>\n            )}\n\n            {!hasMore && posts.length > 0 && (\n                <div className=\"text-center py-12\">\n                    <p className=\"text-surface-400 font-medium italic\">You've reached the end of the universe ‚ú®</p>\n                </div>\n            )}\n        </div>\n    );\n}\n\n"],"names":["useEffect","useState","api","Post","PageResponse","CreatePost","PostCard","FeedPage","posts","setPosts","loading","setLoading","page","setPage","hasMore","setHasMore","loadFeed","pageNum","response","get","params","size","data","content","prev","number","totalPages","error","console","handlePostUpdate","updatedPost","map","p","id","loadMore","nextPage","post","length"],"mappings":"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","ignoreList":[]}}]
}