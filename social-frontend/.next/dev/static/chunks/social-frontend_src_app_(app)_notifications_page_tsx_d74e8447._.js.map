{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/vishalsharma/Downloads/Social-Media-FullStack/social-frontend/src/app/%28app%29/notifications/page.tsx"],"sourcesContent":["// app/(app)/notifications/page.tsx\n\"use client\";\nimport { useEffect, useState } from \"react\";\nimport api from \"@/lib/api\";\nimport { Notification, PageResponse } from \"@/lib/types\";\n\nexport default function NotificationsPage() {\n    const [notifications, setNotifications] = useState<Notification[]>([]);\n    const [loading, setLoading] = useState(true);\n\n    useEffect(() => {\n        loadNotifications();\n    }, []); // [] -> empty dependency array means this effect runs only once after the initial render\n\n    const loadNotifications = async () => {\n        try {\n            const response = await api.get<PageResponse<Notification>>(\n                \"/api/notifications\",\n                { params: { unreadOnly: false, page: 0, size: 50 } }\n            );\n            setNotifications(response.data.content);\n        } catch (error) {\n            console.error(\"Failed to load notifications:\", error);\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    const markAsRead = async (id: string) => {\n        try {\n            await api.put(`/api/notifications/${id}/read`);\n            setNotifications((prev) =>\n                prev.map((n) => (n.id === id ? { ...n, read: true } : n))\n            );\n        } catch (error) {\n            console.error(\"Failed to mark as read:\", error);\n        }\n    };\n\n    const markAllAsRead = async () => {\n        try {\n            await api.put(\"/api/notifications/mark-all-read\");\n            setNotifications((prev) => prev.map((n) => ({ ...n, read: true })));\n        } catch (error) {\n            console.error(\"Failed to mark all as read:\", error);\n        }\n    };\n\n    if (loading) {\n        return <div className=\"text-center py-8\">Loading notifications...</div>;\n    }\n\n    return (\n        <div className=\"max-w-2xl mx-auto\">\n            <div className=\"flex items-center justify-between mb-6\">\n                <h1 className=\"text-2xl font-bold\">Notifications</h1>\n                <button\n                    onClick={markAllAsRead}\n                    className=\"text-blue-600 hover:text-blue-700 text-sm\"\n                >\n                    Mark all as read\n                </button>\n            </div>\n\n            <div className=\"bg-white rounded-lg shadow divide-y\">\n                {notifications.length === 0 ? (\n                    <p className=\"p-6 text-center text-gray-500\">No notifications</p>\n                ) : (\n                    notifications.map((notification) => (\n                        <div\n                            key={notification.id}\n                            onClick={() => !notification.read && markAsRead(notification.id)}\n                            className={`p-4 cursor-pointer hover:bg-gray-50 ${!notification.read ? \"bg-blue-50\" : \"\"\n                                }`}\n                        >\n                            <div className=\"flex items-start justify-between\">\n                                <div className=\"flex-grow\">\n                                    <p className=\"font-semibold text-sm\">{notification.title}</p>\n                                    <p className=\"text-gray-700 mt-1\">{notification.message}</p>\n                                    <p className=\"text-xs text-gray-500 mt-2\">\n                                        {new Date(notification.createdAt).toLocaleString()}\n                                    </p>\n                                </div>\n                                {!notification.read && (\n                                    <div className=\"w-2 h-2 bg-blue-600 rounded-full ml-4 mt-2\"></div>\n                                )}\n                            </div>\n                        </div>\n                    ))\n                )}\n            </div>\n        </div>\n    );\n}\n"],"names":["useEffect","useState","api","Notification","PageResponse","NotificationsPage","notifications","setNotifications","loading","setLoading","loadNotifications","response","get","params","unreadOnly","page","size","data","content","error","console","markAsRead","id","put","prev","map","n","read","markAllAsRead","length","notification","title","message","Date","createdAt","toLocaleString"],"mappings":"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","ignoreList":[]}}]
}