{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/vishalsharma/Downloads/Social-Media-FullStack/social-frontend/src/app/%28app%29/messages/page.tsx"],"sourcesContent":["// app/(app)/messages/page.tsx\n\"use client\";\nimport { useEffect, useState } from \"react\";\nimport api from \"@/lib/api\";\nimport { Conversation } from \"@/lib/types\";\nimport Link from \"next/link\";\nimport { auth } from \"@/lib/auth\";\n\nexport default function ConversationsPage() {\n    const [conversations, setConversations] = useState<Conversation[]>([]);\n    const [loading, setLoading] = useState(true);\n    const currentUser = auth.getUser();\n\n    useEffect(() => {\n        loadConversations();\n    }, []);\n\n    const loadConversations = async () => {\n        try {\n            const response = await api.get<Conversation[]>(\"/api/conversations\");\n            setConversations(response.data);\n        } catch (error) {\n            console.error(\"Failed to load conversations:\", error);\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    if (loading) {\n        return (\n            <div className=\"flex flex-col items-center justify-center py-20 space-y-4\">\n                <div className=\"w-12 h-12 border-4 border-primary-100 border-t-primary-600 rounded-full animate-spin\" />\n                <p className=\"text-surface-500 font-bold uppercase tracking-widest text-xs\">Loading conversations...</p>\n            </div>\n        );\n    }\n\n    return (\n        <div className=\"max-w-4xl mx-auto space-y-8 animate-in\">\n            <div className=\"flex items-center justify-between\">\n                <h1 className=\"text-3xl font-black text-surface-900 tracking-tight\">Messages</h1>\n                <button className=\"btn-primary px-6 py-2 rounded-full text-sm\">New Message</button>\n            </div>\n\n            <div className=\"grid grid-cols-1 gap-4\">\n                {conversations.length > 0 ? (\n                    conversations.map((conv) => {\n                        return (\n                            <Link\n                                key={conv.id}\n                                href={`/messages/${conv.id}`}\n                                className=\"card p-5 bg-white border-surface-100 hover:border-primary-200 hover:shadow-lg hover:-translate-y-0.5 transition-all flex items-center justify-between group\"\n                            >\n                                <div className=\"flex items-center space-x-5\">\n                                    <div className=\"relative\">\n                                        <div className=\"w-14 h-14 rounded-full bg-primary-100 flex items-center justify-center text-primary-600 font-bold text-xl overflow-hidden border-2 border-white shadow-sm transition-transform group-hover:scale-105\">\n                                            {conv.otherUserProfilePicture ? (\n                                                <img\n                                                    src={conv.otherUserProfilePicture.startsWith('http') ? conv.otherUserProfilePicture : `http://localhost:8082${conv.otherUserProfilePicture}`}\n                                                    alt={conv.otherUserName}\n                                                    className=\"w-full h-full object-cover\"\n                                                />\n                                            ) : (\n                                                conv.otherUserName?.charAt(0).toUpperCase() || \"C\"\n                                            )}\n                                        </div>\n                                        <div className=\"absolute bottom-0 right-0 w-3.5 h-3.5 bg-green-500 border-2 border-white rounded-full\"></div>\n                                    </div>\n\n                                    <div className=\"space-y-1\">\n                                        <div className=\"flex items-center space-x-2\">\n                                            <h3 className=\"font-bold text-surface-900 group-hover:text-primary-600 transition-colors\">\n                                                {conv.otherUserName}\n                                            </h3>\n                                            <span className=\"text-[10px] font-bold text-surface-400 uppercase tracking-widest\">â€¢ {new Date(conv.updatedAt).toLocaleDateString()}</span>\n                                        </div>\n                                        <p className=\"text-sm text-surface-500 line-clamp-1 max-w-md\">\n                                            {conv.lastMessage || \"No messages yet\"}\n                                        </p>\n                                    </div>\n                                </div>\n\n                                <div className=\"flex items-center space-x-4\">\n                                    {conv.unreadCount > 0 && (\n                                        <span className=\"bg-primary-600 text-white text-[10px] font-bold px-2 py-1 rounded-full min-w-[20px] text-center shadow-md\">\n                                            {conv.unreadCount}\n                                        </span>\n                                    )}\n                                    <span className=\"text-surface-300 group-hover:text-primary-400 transition-colors text-xl\">â€º</span>\n                                </div>\n                            </Link>\n                        );\n                    })\n                ) : (\n                    <div className=\"text-center py-32 bg-white rounded-3xl border border-dashed border-surface-200\">\n                        <span className=\"text-6xl block mb-6\">ðŸ’¬</span>\n                        <p className=\"text-surface-500 font-bold text-lg\">No conversations yet</p>\n                        <p className=\"text-surface-400 text-sm mt-2 mb-8\">Start messaging your friends to see them here!</p>\n                        <Link href=\"/discover\" className=\"btn-primary px-8 py-3 rounded-full\">Find People to Chat</Link>\n                    </div>\n                )}\n            </div>\n        </div>\n    );\n}\n"],"names":["useEffect","useState","api","Conversation","Link","auth","ConversationsPage","conversations","setConversations","loading","setLoading","currentUser","getUser","loadConversations","response","get","data","error","console","length","map","conv","id","otherUserProfilePicture","startsWith","otherUserName","charAt","toUpperCase","Date","updatedAt","toLocaleDateString","lastMessage","unreadCount"],"mappings":"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","ignoreList":[]}}]
}