{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/vishalsharma/Downloads/Social-Media-FullStack/social-frontend/src/app/%28app%29/discover/page.tsx"],"sourcesContent":["// app/(app)/discover/page.tsx\n\"use client\";\nimport { useState, useEffect } from \"react\";\nimport api from \"@/lib/api\";\nimport { User } from \"@/lib/types\";\nimport Link from \"next/link\";\nimport { auth } from \"@/lib/auth\";\n\nexport default function DiscoverPage() {\n    const [searchQuery, setSearchQuery] = useState(\"\");\n    const [searchResults, setSearchResults] = useState<User[]>([]);\n    const [suggestions, setSuggestions] = useState<User[]>([]);\n    const [loading, setLoading] = useState(false);\n    const currentUser = auth.getUser();\n\n    useEffect(() => {\n        loadSuggestions();\n    }, []);\n\n    const loadSuggestions = async () => {\n        try {\n            // Assuming an endpoint for suggestions or just fetch all to simulate\n            const response = await api.get<User[]>(\"/api/users/suggestions\");\n            setSuggestions(response.data);\n        } catch (error) {\n            console.error(\"Failed to load suggestions:\", error);\n            // Fallback: just fetch some users if suggestions endpoint doesn't exist\n            try {\n                const res = await api.get<User[]>(\"/api/users\");\n                setSuggestions(res.data.filter(u => u.username !== currentUser?.username).slice(0, 5));\n            } catch (e) { }\n        }\n    };\n\n    const handleSearch = async (e: React.FormEvent) => {\n        e.preventDefault();\n        if (!searchQuery.trim()) return;\n\n        setLoading(true);\n        try {\n            const response = await api.get<User[]>(`/api/users/search`, {\n                params: { query: searchQuery }\n            });\n            setSearchResults(response.data);\n        } catch (error) {\n            console.error(\"Search failed:\", error);\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    const handleFollow = async (userId: string) => {\n        try {\n            await api.post(`/api/users/follow/${userId}`);\n            // Refresh counts/state\n            if (searchQuery) handleSearch({ preventDefault: () => { } } as any);\n            loadSuggestions();\n        } catch (error) {\n            console.error(\"Failed to follow:\", error);\n        }\n    };\n\n    const UserCard = ({ user }: { user: User }) => (\n        <div className=\"card p-4 flex items-center justify-between hover:bg-surface-50 transition-all border-surface-100 mb-3 bg-white\">\n            <Link href={`/profile/${user.username}`} className=\"flex items-center space-x-4 flex-grow\">\n                <div className=\"w-12 h-12 rounded-full bg-primary-100 flex items-center justify-center text-primary-600 font-bold overflow-hidden border-2 border-white shadow-sm\">\n                    {user.profilePicture ? (\n                        <img src={user.profilePicture.startsWith('http') ? user.profilePicture : `http://localhost:8082${user.profilePicture}`} alt={user.username} className=\"w-full h-full object-cover\" />\n                    ) : (\n                        user.username.charAt(0).toUpperCase()\n                    )}\n                </div>\n                <div>\n                    <h3 className=\"font-bold text-surface-900 leading-tight\">{user.fullName || user.username}</h3>\n                    <p className=\"text-sm text-surface-500\">@{user.username}</p>\n                    <p className=\"text-xs text-surface-400 mt-0.5\">{user.followersCount} followers</p>\n                </div>\n            </Link>\n\n            {user.username !== currentUser?.username && (\n                <button\n                    onClick={() => handleFollow(user.id)}\n                    className={`px-5 py-1.5 rounded-full text-xs font-bold transition-all ${user.isFollowing\n                            ? \"bg-surface-100 text-surface-600 hover:bg-surface-200\"\n                            : \"bg-primary-600 text-white hover:bg-primary-700 shadow-sm\"\n                        }`}\n                >\n                    {user.isFollowing ? \"Following\" : \"Follow\"}\n                </button>\n            )}\n        </div>\n    );\n\n    return (\n        <div className=\"max-w-4xl mx-auto space-y-8 h-full\">\n            <div className=\"card p-6 bg-primary-600 text-white shadow-xl border-none relative overflow-hidden\">\n                <div className=\"absolute top-[-20%] right-[-10%] w-64 h-64 bg-white/10 rounded-full blur-3xl\" />\n                <div className=\"relative z-10\">\n                    <h1 className=\"text-3xl font-black tracking-tight mb-2\">Discover People</h1>\n                    <p className=\"text-primary-100 font-medium\">Find your friends and build your community</p>\n\n                    <form onSubmit={handleSearch} className=\"mt-6 relative flex items-center max-w-xl\">\n                        <input\n                            type=\"text\"\n                            value={searchQuery}\n                            onChange={(e) => setSearchQuery(e.target.value)}\n                            placeholder=\"Search by name or username...\"\n                            className=\"w-full pl-12 pr-4 py-3.5 bg-white text-surface-900 rounded-2xl focus:outline-none focus:ring-4 focus:ring-white/20 shadow-lg text-sm\"\n                        />\n                        <span className=\"absolute left-4 text-surface-400 text-xl\">üîç</span>\n                        <button\n                            type=\"submit\"\n                            className=\"absolute right-2 px-4 py-2 bg-primary-600 text-white rounded-xl font-bold text-xs hover:bg-primary-700 transition-colors\"\n                        >\n                            Search\n                        </button>\n                    </form>\n                </div>\n            </div>\n\n            <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-8\">\n                <div className=\"lg:col-span-2 space-y-6\">\n                    {searchQuery && (\n                        <div className=\"animate-in\">\n                            <div className=\"flex items-center justify-between mb-4\">\n                                <h2 className=\"text-xl font-black text-surface-900 tracking-tight flex items-center\">\n                                    Search Results\n                                    {loading && <span className=\"ml-3 animate-spin text-primary-600 text-sm\">‚óå</span>}\n                                </h2>\n                                <button onClick={() => setSearchResults([])} className=\"text-xs font-bold text-surface-400 hover:text-primary-600\">Clear</button>\n                            </div>\n                            {searchResults.length > 0 ? (\n                                <div className=\"space-y-1\">\n                                    {searchResults.map(user => <UserCard key={user.id} user={user} />)}\n                                </div>\n                            ) : (\n                                !loading && <div className=\"text-center py-12 bg-white rounded-2xl border border-dashed border-surface-200\">\n                                    <p className=\"text-surface-400 font-medium\">No users found matching \"{searchQuery}\"</p>\n                                </div>\n                            )}\n                        </div>\n                    )}\n\n                    <div className=\"space-y-4\">\n                        <h2 className=\"text-xl font-black text-surface-900 tracking-tight\">Suggested for you</h2>\n                        <div className=\"space-y-1\">\n                            {suggestions.length > 0 ? (\n                                suggestions.map(user => <UserCard key={user.id} user={user} />)\n                            ) : (\n                                <div className=\"text-center py-12 bg-white rounded-2xl border border-dashed border-surface-200\">\n                                    <p className=\"text-surface-400 font-medium\">Looking for people to suggest...</p>\n                                </div>\n                            )}\n                        </div>\n                    </div>\n                </div>\n\n                <div className=\"space-y-6\">\n                    <div className=\"card p-6 bg-white border-surface-200 shadow-sm\">\n                        <h3 className=\"font-black text-surface-900 text-sm uppercase tracking-widest mb-4\">Trending Today</h3>\n                        <div className=\"space-y-4\">\n                            {['#ReactJS', '#NextJS', '#TailwindCSS', '#FullStack'].map(tag => (\n                                <div key={tag} className=\"group cursor-pointer\">\n                                    <p className=\"text-sm font-bold text-surface-900 group-hover:text-primary-600 transition-colors\">{tag}</p>\n                                    <p className=\"text-[10px] text-surface-400 font-bold uppercase tracking-tighter\">1.2k posts</p>\n                                </div>\n                            ))}\n                        </div>\n                        <button className=\"w-full mt-6 py-2 text-xs font-bold text-primary-600 hover:bg-primary-50 rounded-lg transition-colors\">\n                            Show more\n                        </button>\n                    </div>\n\n                    <div className=\"text-[10px] text-surface-400 px-2 space-y-1\">\n                        <p>¬© 2024 SOCIAL MEDIA INC.</p>\n                        <div className=\"flex space-x-2\">\n                            <span className=\"hover:underline cursor-pointer\">Privacy</span>\n                            <span className=\"hover:underline cursor-pointer\">Terms</span>\n                            <span className=\"hover:underline cursor-pointer\">Help</span>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    );\n}\n"],"names":["useState","useEffect","api","User","Link","auth","DiscoverPage","searchQuery","setSearchQuery","searchResults","setSearchResults","suggestions","setSuggestions","loading","setLoading","currentUser","getUser","loadSuggestions","response","get","data","error","console","res","filter","u","username","slice","e","handleSearch","React","FormEvent","preventDefault","trim","params","query","handleFollow","userId","post","UserCard","user","profilePicture","startsWith","charAt","toUpperCase","fullName","followersCount","id","isFollowing","target","value","length","map","tag"],"mappings":"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","ignoreList":[]}}]
}