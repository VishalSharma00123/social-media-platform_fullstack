{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/vishalsharma/Downloads/Social-Media-FullStack/social-frontend/src/components/CreatePost.tsx"],"sourcesContent":["// components/CreatePost.tsx\n\"use client\";\nimport { useState, FormEvent, ChangeEvent } from \"react\";\nimport api from \"@/lib/api\";\n\ninterface Props {\n    onPostCreated: () => void;\n}\n\nexport default function CreatePost({ onPostCreated }: Props) {\n    const [content, setContent] = useState(\"\");\n    const [postType, setPostType] = useState<\"TEXT\" | \"IMAGE\" | \"VIDEO\">(\"TEXT\");\n    const [images, setImages] = useState<FileList | null>(null);\n    const [video, setVideo] = useState<File | null>(null);\n    const [loading, setLoading] = useState(false);\n    const [error, setError] = useState(\"\");\n\n    const handleSubmit = async (e: FormEvent) => {\n        e.preventDefault();\n        if (!content.trim()) {\n            setError(\"Content cannot be empty\");\n            return;\n        }\n\n        setLoading(true);\n        setError(\"\");\n\n        try {\n            const formData = new FormData();\n\n            const requestBlob = new Blob(\n                [JSON.stringify({ content, postType })],\n                { type: \"application/json\" }\n            );\n            formData.append(\"request\", requestBlob);\n\n            if (images && postType === \"IMAGE\") {\n                Array.from(images).forEach((file) => {\n                    formData.append(\"images\", file);\n                });\n            }\n\n            if (video && postType === \"VIDEO\") {\n                formData.append(\"video\", video);\n            }\n\n            // ‚úÖ Don't set Content-Type manually for FormData\n            const response = await api.post(\"/api/posts\", formData);\n\n            console.log(\"Post created:\", response.data);\n\n            setContent(\"\");\n            setImages(null);\n            setVideo(null);\n            setPostType(\"TEXT\");\n            onPostCreated();\n        } catch (err: any) {\n            console.error(\"Error:\", err.response?.data || err.message);\n            setError(err.response?.data?.message || \"Failed to create post\");\n        } finally {\n            setLoading(false);\n        }\n    };\n    const handleImageChange = (e: ChangeEvent<HTMLInputElement>) => {\n        setImages(e.target.files);\n        setPostType(\"IMAGE\");\n    };\n\n    const handleVideoChange = (e: ChangeEvent<HTMLInputElement>) => {\n        const file = e.target.files?.[0];\n        setVideo(file || null);\n        setPostType(\"VIDEO\");\n    };\n\n    return (\n        <div className=\"card p-5 mb-8 shadow-md border-surface-200 bg-white\">\n            <form onSubmit={handleSubmit} className=\"space-y-4\">\n                <div className=\"flex space-x-4\">\n                    <div className=\"w-10 h-10 bg-primary-100 rounded-full flex-shrink-0 flex items-center justify-center text-primary-600 font-bold\">\n                        {/* Avatar placeholder or user inital */}\n                        ?\n                    </div>\n                    <textarea\n                        value={content}\n                        onChange={(e) => setContent(e.target.value)}\n                        placeholder=\"What's happening?\"\n                        rows={2}\n                        className=\"w-full bg-transparent border-none focus:ring-0 text-lg placeholder-surface-400 resize-none pt-2\"\n                    />\n                </div>\n\n                <div className=\"flex items-center justify-between pt-3 border-t border-surface-100\">\n                    <div className=\"flex items-center space-x-2\">\n                        <label className=\"flex items-center space-x-2 cursor-pointer p-2 hover:bg-primary-50 rounded-xl transition-all group\">\n                            <input\n                                type=\"file\"\n                                multiple\n                                accept=\"image/*\"\n                                onChange={handleImageChange}\n                                className=\"hidden\"\n                            />\n                            <span className=\"text-xl group-hover:scale-110 transition-transform\">üñºÔ∏è</span>\n                            <span className=\"text-sm font-semibold text-surface-600 group-hover:text-primary-600\">Photo</span>\n                        </label>\n\n                        <label className=\"flex items-center space-x-2 cursor-pointer p-2 hover:bg-blue-50 rounded-xl transition-all group\">\n                            <input\n                                type=\"file\"\n                                accept=\"video/*\"\n                                onChange={handleVideoChange}\n                                className=\"hidden\"\n                            />\n                            <span className=\"text-xl group-hover:scale-110 transition-transform\">üé•</span>\n                            <span className=\"text-sm font-semibold text-surface-600 group-hover:text-blue-600\">Video</span>\n                        </label>\n                    </div>\n\n                    <button\n                        type=\"submit\"\n                        disabled={loading || !content.trim()}\n                        className=\"btn-primary px-6 py-2 rounded-full font-bold disabled:bg-surface-200 disabled:text-surface-400\"\n                    >\n                        {loading ? \"...\" : \"Post\"}\n                    </button>\n                </div>\n\n                {(images || video) && (\n                    <div className=\"bg-surface-50 p-3 rounded-xl flex items-center justify-between border border-surface-200 animate-in\">\n                        <div className=\"flex items-center space-x-2 text-sm text-surface-600 font-medium\">\n                            {images ? (\n                                <><span>üì∏</span> <span>{images.length} images selected</span></>\n                            ) : (\n                                <><span>üé¨</span> <span>{video?.name}</span></>\n                            )}\n                        </div>\n                        <button\n                            type=\"button\"\n                            onClick={() => { setImages(null); setVideo(null); setPostType(\"TEXT\"); }}\n                            className=\"text-red-500 hover:bg-red-50 p-1 rounded-lg\"\n                        >\n                            ‚úï\n                        </button>\n                    </div>\n                )}\n\n                {error && (\n                    <div className=\"bg-red-50 text-red-600 text-xs p-2 rounded-lg border border-red-100\">\n                        {error}\n                    </div>\n                )}\n            </form>\n        </div>\n    );\n}\n\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 301, "column": 0}, "map": {"version":3,"sources":["file:///Users/vishalsharma/Downloads/Social-Media-FullStack/social-frontend/src/components/PostCard.tsx"],"sourcesContent":["// components/PostCard.tsx\n\"use client\";\nimport { useState } from \"react\";\nimport { Post } from \"@/lib/types\";\nimport api from \"@/lib/api\";\n\ninterface Props {\n    post: Post;\n    onUpdate: (updatedPost: Post) => void;\n}\n\nexport default function PostCard({ post, onUpdate }: Props) {\n    const [comment, setComment] = useState(\"\");\n    const [showComments, setShowComments] = useState(false);\n\n    // ‚úÖ ADD THIS: Build full URL for media\n    const getMediaUrl = (path: string) => {\n        if (!path) return \"\";\n        if (path.startsWith(\"http\")) return path;\n        return `http://localhost:8082${path}`; // Post Service URL\n    };\n\n    const toggleLike = async () => {\n        try {\n            const endpoint = `/api/posts/${post.id}/like`;\n            const response = post.isLiked\n                ? await api.delete<Post>(endpoint)\n                : await api.post<Post>(endpoint);\n            onUpdate(response.data);\n        } catch (error) {\n            console.error(\"Failed to toggle like:\", error);\n        }\n    };\n\n    const addComment = async () => {\n        if (!comment.trim()) return;\n        try {\n            const response = await api.post<Post>(`/api/posts/${post.id}/comments`, {\n                content: comment,\n            });\n            setComment(\"\");\n            onUpdate(response.data);\n        } catch (error) {\n            console.error(\"Failed to add comment:\", error);\n        }\n    };\n\n    // ‚úÖ FIX: Use post.images instead of post.imageUrls\n    const images = post.images || [];\n    const video = post.video || post.videoUrl;\n\n    return (\n        <div className=\"card mb-6 animate-in bg-white border-surface-200\">\n            {/* Header */}\n            <div className=\"p-4 flex items-center justify-between\">\n                <div className=\"flex items-center\">\n                    <div className=\"w-10 h-10 rounded-full bg-primary-100 flex items-center justify-center text-primary-600 font-bold overflow-hidden mr-3\">\n                        {post.userProfilePicture ? (\n                            <img\n                                src={getMediaUrl(post.userProfilePicture)}\n                                alt={post.username}\n                                className=\"w-full h-full object-cover\"\n                            />\n                        ) : (\n                            post.username.charAt(0).toUpperCase()\n                        )}\n                    </div>\n                    <div>\n                        <p className=\"font-bold text-surface-900 leading-tight hover:underline cursor-pointer\">\n                            {post.username}\n                        </p>\n                        <p className=\"text-[11px] font-medium text-surface-400 uppercase tracking-wider\">\n                            {new Date(post.createdAt).toLocaleDateString()} ‚Ä¢ {new Date(post.createdAt).toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })}\n                        </p>\n                    </div>\n                </div>\n                <button className=\"text-surface-400 hover:text-surface-600 p-1 rounded-full hover:bg-surface-50 transition-colors\">\n                    <span className=\"text-lg\">‚Ä¢‚Ä¢‚Ä¢</span>\n                </button>\n            </div>\n\n            {/* Content */}\n            <div className=\"px-4 pb-3\">\n                <p className=\"text-surface-800 leading-relaxed whitespace-pre-wrap\">{post.content}</p>\n            </div>\n\n            {/* ‚úÖ FIX: Images - use post.images and getMediaUrl */}\n            {images.length > 0 && (\n                <div className={`grid gap-1 mb-2 px-1 ${images.length > 1 ? 'grid-cols-2' : 'grid-cols-1'}`}>\n                    {images.map((url, idx) => (\n                        <img\n                            key={idx}\n                            src={getMediaUrl(url)}\n                            alt=\"Post content\"\n                            className={`w-full object-cover ${images.length === 1 ? 'max-h-[500px] rounded-lg' : 'h-48 rounded-md hover:opacity-95 transition-opacity'}`}\n                            onError={(e) => {\n                                console.error(\"Image failed to load:\", url);\n                                e.currentTarget.style.display = 'none';\n                            }}\n                        />\n                    ))}\n                </div>\n            )}\n\n            {/* ‚úÖ FIX: Video - use getMediaUrl */}\n            {video && (\n                <div className=\"px-1 mb-2\">\n                    <video controls className=\"w-full rounded-lg max-h-[500px] bg-black\">\n                        <source src={getMediaUrl(video)} />\n                    </video>\n                </div>\n            )}\n\n            {/* Actions */}\n            <div className=\"px-4 py-3 flex items-center justify-between border-t border-surface-50\">\n                <div className=\"flex items-center space-x-1\">\n                    <button\n                        onClick={toggleLike}\n                        className={`flex items-center space-x-2 px-3 py-1.5 rounded-full transition-all ${post.isLiked\n                            ? \"bg-red-50 text-red-600 font-bold\"\n                            : \"text-surface-600 hover:bg-red-50 hover:text-red-500\"\n                            }`}\n                    >\n                        <span className=\"text-lg\">{post.isLiked ? \"‚ù§Ô∏è\" : \"ü§ç\"}</span>\n                        <span className=\"text-sm\">{post.likesCount}</span>\n                    </button>\n\n                    <button\n                        onClick={() => setShowComments(!showComments)}\n                        className={`flex items-center space-x-2 px-3 py-1.5 rounded-full transition-all ${showComments\n                            ? \"bg-primary-50 text-primary-600 font-bold\"\n                            : \"text-surface-600 hover:bg-primary-50 hover:text-primary-600\"\n                            }`}\n                    >\n                        <span className=\"text-lg\">üí¨</span>\n                        <span className=\"text-sm\">{post.commentsCount}</span>\n                    </button>\n\n                    <button className=\"flex items-center space-x-2 text-surface-600 hover:bg-green-50 hover:text-green-600 px-3 py-1.5 rounded-full transition-all\">\n                        <span className=\"text-lg\">üîÅ</span>\n                        <span className=\"text-sm\">{post.sharesCount}</span>\n                    </button>\n                </div>\n\n                <button className=\"text-surface-400 hover:text-primary-600 p-2 rounded-full hover:bg-primary-50 transition-all\">\n                    <span>üîñ</span>\n                </button>\n            </div>\n\n            {/* Comments Section */}\n            {showComments && (\n                <div className=\"px-4 pb-4 border-t border-surface-50 bg-surface-50/30\">\n                    <div className=\"pt-4 space-y-3\">\n                        {post.recentComments?.map((c) => (\n                            <div key={c.id} className=\"flex space-x-3 group\">\n                                <div className=\"w-8 h-8 rounded-full bg-surface-200 flex-shrink-0 flex items-center justify-center text-[10px] font-bold\">\n                                    {c.username.charAt(0).toUpperCase()}\n                                </div>\n                                <div className=\"bg-white px-3 py-2 rounded-2xl rounded-tl-none border border-surface-100 shadow-sm flex-grow\">\n                                    <p className=\"text-xs font-bold text-surface-900 mb-0.5\">{c.username}</p>\n                                    <p className=\"text-[13px] text-surface-700\">{c.content}</p>\n                                </div>\n                            </div>\n                        ))}\n                    </div>\n\n                    <div className=\"flex mt-4 items-center space-x-2 bg-white p-1 pl-3 rounded-full border border-surface-200 focus-within:ring-2 focus-within:ring-primary-100 transition-all\">\n                        <input\n                            value={comment}\n                            onChange={(e) => setComment(e.target.value)}\n                            placeholder=\"Write a comment...\"\n                            className=\"flex-grow bg-transparent border-none focus:ring-0 text-sm py-1.5\"\n                        />\n                        <button\n                            onClick={addComment}\n                            disabled={!comment.trim()}\n                            className=\"bg-primary-600 text-white p-2 rounded-full hover:bg-primary-700 disabled:bg-surface-200 transition-colors\"\n                        >\n                            <span className=\"block scale-75\">‚û§</span>\n                        </button>\n                    </div>\n                </div>\n            )}\n        </div>\n    );\n}"],"names":[],"mappings":"AAAA,0BAA0B;;;;;;AAE1B;AAEA;AAHA;;;;AAUe,SAAS,SAAS,EAAE,IAAI,EAAE,QAAQ,EAAS;IACtD,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,uOAAQ,EAAC;IACvC,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,uOAAQ,EAAC;IAEjD,uCAAuC;IACvC,MAAM,cAAc,CAAC;QACjB,IAAI,CAAC,MAAM,OAAO;QAClB,IAAI,KAAK,UAAU,CAAC,SAAS,OAAO;QACpC,OAAO,CAAC,qBAAqB,EAAE,MAAM,EAAE,mBAAmB;IAC9D;IAEA,MAAM,aAAa;QACf,IAAI;YACA,MAAM,WAAW,CAAC,WAAW,EAAE,KAAK,EAAE,CAAC,KAAK,CAAC;YAC7C,MAAM,WAAW,KAAK,OAAO,GACvB,MAAM,kJAAG,CAAC,MAAM,CAAO,YACvB,MAAM,kJAAG,CAAC,IAAI,CAAO;YAC3B,SAAS,SAAS,IAAI;QAC1B,EAAE,OAAO,OAAO;YACZ,QAAQ,KAAK,CAAC,0BAA0B;QAC5C;IACJ;IAEA,MAAM,aAAa;QACf,IAAI,CAAC,QAAQ,IAAI,IAAI;QACrB,IAAI;YACA,MAAM,WAAW,MAAM,kJAAG,CAAC,IAAI,CAAO,CAAC,WAAW,EAAE,KAAK,EAAE,CAAC,SAAS,CAAC,EAAE;gBACpE,SAAS;YACb;YACA,WAAW;YACX,SAAS,SAAS,IAAI;QAC1B,EAAE,OAAO,OAAO;YACZ,QAAQ,KAAK,CAAC,0BAA0B;QAC5C;IACJ;IAEA,mDAAmD;IACnD,MAAM,SAAS,KAAK,MAAM,IAAI,EAAE;IAChC,MAAM,QAAQ,KAAK,KAAK,IAAI,KAAK,QAAQ;IAEzC,qBACI,oQAAC;QAAI,WAAU;;0BAEX,oQAAC;gBAAI,WAAU;;kCACX,oQAAC;wBAAI,WAAU;;0CACX,oQAAC;gCAAI,WAAU;0CACV,KAAK,kBAAkB,iBACpB,oQAAC;oCACG,KAAK,YAAY,KAAK,kBAAkB;oCACxC,KAAK,KAAK,QAAQ;oCAClB,WAAU;;;;;2CAGd,KAAK,QAAQ,CAAC,MAAM,CAAC,GAAG,WAAW;;;;;;0CAG3C,oQAAC;;kDACG,oQAAC;wCAAE,WAAU;kDACR,KAAK,QAAQ;;;;;;kDAElB,oQAAC;wCAAE,WAAU;;4CACR,IAAI,KAAK,KAAK,SAAS,EAAE,kBAAkB;4CAAG;4CAAI,IAAI,KAAK,KAAK,SAAS,EAAE,kBAAkB,CAAC,EAAE,EAAE;gDAAE,MAAM;gDAAW,QAAQ;4CAAU;;;;;;;;;;;;;;;;;;;kCAIpJ,oQAAC;wBAAO,WAAU;kCACd,cAAA,oQAAC;4BAAK,WAAU;sCAAU;;;;;;;;;;;;;;;;;0BAKlC,oQAAC;gBAAI,WAAU;0BACX,cAAA,oQAAC;oBAAE,WAAU;8BAAwD,KAAK,OAAO;;;;;;;;;;;YAIpF,OAAO,MAAM,GAAG,mBACb,oQAAC;gBAAI,WAAW,CAAC,qBAAqB,EAAE,OAAO,MAAM,GAAG,IAAI,gBAAgB,eAAe;0BACtF,OAAO,GAAG,CAAC,CAAC,KAAK,oBACd,oQAAC;wBAEG,KAAK,YAAY;wBACjB,KAAI;wBACJ,WAAW,CAAC,oBAAoB,EAAE,OAAO,MAAM,KAAK,IAAI,6BAA6B,uDAAuD;wBAC5I,SAAS,CAAC;4BACN,QAAQ,KAAK,CAAC,yBAAyB;4BACvC,EAAE,aAAa,CAAC,KAAK,CAAC,OAAO,GAAG;wBACpC;uBAPK;;;;;;;;;;YAcpB,uBACG,oQAAC;gBAAI,WAAU;0BACX,cAAA,oQAAC;oBAAM,QAAQ;oBAAC,WAAU;8BACtB,cAAA,oQAAC;wBAAO,KAAK,YAAY;;;;;;;;;;;;;;;;0BAMrC,oQAAC;gBAAI,WAAU;;kCACX,oQAAC;wBAAI,WAAU;;0CACX,oQAAC;gCACG,SAAS;gCACT,WAAW,CAAC,oEAAoE,EAAE,KAAK,OAAO,GACxF,qCACA,uDACA;;kDAEN,oQAAC;wCAAK,WAAU;kDAAW,KAAK,OAAO,GAAG,OAAO;;;;;;kDACjD,oQAAC;wCAAK,WAAU;kDAAW,KAAK,UAAU;;;;;;;;;;;;0CAG9C,oQAAC;gCACG,SAAS,IAAM,gBAAgB,CAAC;gCAChC,WAAW,CAAC,oEAAoE,EAAE,eAC5E,6CACA,+DACA;;kDAEN,oQAAC;wCAAK,WAAU;kDAAU;;;;;;kDAC1B,oQAAC;wCAAK,WAAU;kDAAW,KAAK,aAAa;;;;;;;;;;;;0CAGjD,oQAAC;gCAAO,WAAU;;kDACd,oQAAC;wCAAK,WAAU;kDAAU;;;;;;kDAC1B,oQAAC;wCAAK,WAAU;kDAAW,KAAK,WAAW;;;;;;;;;;;;;;;;;;kCAInD,oQAAC;wBAAO,WAAU;kCACd,cAAA,oQAAC;sCAAK;;;;;;;;;;;;;;;;;YAKb,8BACG,oQAAC;gBAAI,WAAU;;kCACX,oQAAC;wBAAI,WAAU;kCACV,KAAK,cAAc,EAAE,IAAI,CAAC,kBACvB,oQAAC;gCAAe,WAAU;;kDACtB,oQAAC;wCAAI,WAAU;kDACV,EAAE,QAAQ,CAAC,MAAM,CAAC,GAAG,WAAW;;;;;;kDAErC,oQAAC;wCAAI,WAAU;;0DACX,oQAAC;gDAAE,WAAU;0DAA6C,EAAE,QAAQ;;;;;;0DACpE,oQAAC;gDAAE,WAAU;0DAAgC,EAAE,OAAO;;;;;;;;;;;;;+BANpD,EAAE,EAAE;;;;;;;;;;kCAYtB,oQAAC;wBAAI,WAAU;;0CACX,oQAAC;gCACG,OAAO;gCACP,UAAU,CAAC,IAAM,WAAW,EAAE,MAAM,CAAC,KAAK;gCAC1C,aAAY;gCACZ,WAAU;;;;;;0CAEd,oQAAC;gCACG,SAAS;gCACT,UAAU,CAAC,QAAQ,IAAI;gCACvB,WAAU;0CAEV,cAAA,oQAAC;oCAAK,WAAU;8CAAiB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAO7D"}},
    {"offset": {"line": 700, "column": 0}, "map": {"version":3,"sources":["file:///Users/vishalsharma/Downloads/Social-Media-FullStack/social-frontend/src/app/%28app%29/feed/page.tsx"],"sourcesContent":["// app/(app)/feed/page.tsx\n\"use client\";\nimport { useEffect, useState } from \"react\";\nimport api from \"@/lib/api\";\nimport { Post, PageResponse } from \"@/lib/types\";\nimport CreatePost from \"@/components/CreatePost\";\nimport PostCard from \"@/components/PostCard\";\n\nexport default function FeedPage() {\n    const [posts, setPosts] = useState<Post[]>([]);\n    const [loading, setLoading] = useState(true);\n    const [page, setPage] = useState(0);\n    const [hasMore, setHasMore] = useState(true);\n\n    const loadFeed = async (pageNum: number = 0) => {\n        try {\n            const response = await api.get<PageResponse<Post>>(\"/api/posts/feed\", {\n                params: { page: pageNum, size: 20 },\n            });\n\n            if (pageNum === 0) {\n                setPosts(response.data.content);\n            } else {\n                setPosts((prev) => [...prev, ...response.data.content]);\n            }\n\n            setHasMore(response.data.number < response.data.totalPages - 1);\n        } catch (error) {\n            console.error(\"Failed to load feed:\", error);\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    useEffect(() => {\n        loadFeed(0);\n    }, []);\n\n    const handlePostUpdate = (updatedPost: Post) => {\n        setPosts((prev) =>\n            prev.map((p) => (p.id === updatedPost.id ? updatedPost : p))\n        );\n    };\n\n    const loadMore = () => {\n        const nextPage = page + 1;\n        setPage(nextPage);\n        loadFeed(nextPage);\n    };\n\n    if (loading) {\n        return (\n            <div className=\"flex flex-col items-center justify-center py-20 space-y-4\">\n                <div className=\"w-12 h-12 border-4 border-primary-100 border-t-primary-600 rounded-full animate-spin\" />\n                <p className=\"text-surface-500 font-bold uppercase tracking-widest text-xs\">Curating your feed...</p>\n            </div>\n        );\n    }\n\n    return (\n        <div className=\"max-w-2xl mx-auto py-4\">\n            <CreatePost onPostCreated={() => loadFeed(0)} />\n\n            <div className=\"space-y-2\">\n                {posts.map((post) => (\n                    <PostCard key={post.id} post={post} onUpdate={handlePostUpdate} />\n                ))}\n            </div>\n\n            {hasMore && (\n                <div className=\"text-center mt-12 pb-12\">\n                    <button\n                        onClick={loadMore}\n                        className=\"px-8 py-3 bg-white border border-surface-200 text-surface-600 font-bold rounded-full hover:bg-primary-50 hover:text-primary-600 hover:border-primary-200 transition-all shadow-sm active:scale-95\"\n                    >\n                        Load More Posts\n                    </button>\n                </div>\n            )}\n\n            {!hasMore && posts.length > 0 && (\n                <div className=\"text-center py-12\">\n                    <p className=\"text-surface-400 font-medium italic\">You've reached the end of the universe ‚ú®</p>\n                </div>\n            )}\n        </div>\n    );\n}\n\n"],"names":[],"mappings":"AAAA,0BAA0B;;;;;;AAE1B;AACA;AAEA;AACA;AALA;;;;;;AAOe,SAAS;IACpB,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,uOAAQ,EAAS,EAAE;IAC7C,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,uOAAQ,EAAC;IACvC,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,uOAAQ,EAAC;IACjC,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,uOAAQ,EAAC;IAEvC,MAAM,WAAW,OAAO,UAAkB,CAAC;QACvC,IAAI;YACA,MAAM,WAAW,MAAM,kJAAG,CAAC,GAAG,CAAqB,mBAAmB;gBAClE,QAAQ;oBAAE,MAAM;oBAAS,MAAM;gBAAG;YACtC;YAEA,IAAI,YAAY,GAAG;gBACf,SAAS,SAAS,IAAI,CAAC,OAAO;YAClC,OAAO;gBACH,SAAS,CAAC,OAAS;2BAAI;2BAAS,SAAS,IAAI,CAAC,OAAO;qBAAC;YAC1D;YAEA,WAAW,SAAS,IAAI,CAAC,MAAM,GAAG,SAAS,IAAI,CAAC,UAAU,GAAG;QACjE,EAAE,OAAO,OAAO;YACZ,QAAQ,KAAK,CAAC,wBAAwB;QAC1C,SAAU;YACN,WAAW;QACf;IACJ;IAEA,IAAA,wOAAS,EAAC;QACN,SAAS;IACb,GAAG,EAAE;IAEL,MAAM,mBAAmB,CAAC;QACtB,SAAS,CAAC,OACN,KAAK,GAAG,CAAC,CAAC,IAAO,EAAE,EAAE,KAAK,YAAY,EAAE,GAAG,cAAc;IAEjE;IAEA,MAAM,WAAW;QACb,MAAM,WAAW,OAAO;QACxB,QAAQ;QACR,SAAS;IACb;IAEA,IAAI,SAAS;QACT,qBACI,oQAAC;YAAI,WAAU;;8BACX,oQAAC;oBAAI,WAAU;;;;;;8BACf,oQAAC;oBAAE,WAAU;8BAA+D;;;;;;;;;;;;IAGxF;IAEA,qBACI,oQAAC;QAAI,WAAU;;0BACX,oQAAC,iKAAU;gBAAC,eAAe,IAAM,SAAS;;;;;;0BAE1C,oQAAC;gBAAI,WAAU;0BACV,MAAM,GAAG,CAAC,CAAC,qBACR,oQAAC,+JAAQ;wBAAe,MAAM;wBAAM,UAAU;uBAA/B,KAAK,EAAE;;;;;;;;;;YAI7B,yBACG,oQAAC;gBAAI,WAAU;0BACX,cAAA,oQAAC;oBACG,SAAS;oBACT,WAAU;8BACb;;;;;;;;;;;YAMR,CAAC,WAAW,MAAM,MAAM,GAAG,mBACxB,oQAAC;gBAAI,WAAU;0BACX,cAAA,oQAAC;oBAAE,WAAU;8BAAsC;;;;;;;;;;;;;;;;;AAKvE"}}]
}