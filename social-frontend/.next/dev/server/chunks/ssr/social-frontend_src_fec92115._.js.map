{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/vishalsharma/Downloads/Social-Media-FullStack/social-frontend/src/components/CreatePost.tsx"],"sourcesContent":["// components/CreatePost.tsx\n\"use client\";\nimport { useState, FormEvent, ChangeEvent } from \"react\";\nimport api from \"@/lib/api\";\n\ninterface Props {\n    onPostCreated: () => void;\n}\n\nexport default function CreatePost({ onPostCreated }: Props) {\n    const [content, setContent] = useState(\"\");\n    const [postType, setPostType] = useState<\"TEXT\" | \"IMAGE\" | \"VIDEO\">(\"TEXT\");\n    const [images, setImages] = useState<FileList | null>(null);\n    const [video, setVideo] = useState<File | null>(null);\n    const [loading, setLoading] = useState(false);\n    const [error, setError] = useState(\"\");\n\n    const handleSubmit = async (e: FormEvent) => {\n        e.preventDefault();\n        if (!content.trim()) {\n            setError(\"Content cannot be empty\");\n            return;\n        }\n\n        setLoading(true);\n        setError(\"\");\n\n        try {\n            const formData = new FormData();\n\n            const requestBlob = new Blob(\n                [JSON.stringify({ content, postType })],\n                { type: \"application/json\" }\n            );\n            formData.append(\"request\", requestBlob);\n\n            if (images && postType === \"IMAGE\") {\n                Array.from(images).forEach((file) => {\n                    formData.append(\"images\", file);\n                });\n            }\n\n            if (video && postType === \"VIDEO\") {\n                formData.append(\"video\", video);\n            }\n\n            // ‚úÖ Don't set Content-Type manually for FormData\n            const response = await api.post(\"/api/posts\", formData);\n\n            console.log(\"Post created:\", response.data);\n\n            setContent(\"\");\n            setImages(null);\n            setVideo(null);\n            setPostType(\"TEXT\");\n            onPostCreated();\n        } catch (err: any) {\n            console.error(\"Error:\", err.response?.data || err.message);\n            setError(err.response?.data?.message || \"Failed to create post\");\n        } finally {\n            setLoading(false);\n        }\n    };\n    const handleImageChange = (e: ChangeEvent<HTMLInputElement>) => {\n        setImages(e.target.files);\n        setPostType(\"IMAGE\");\n    };\n\n    const handleVideoChange = (e: ChangeEvent<HTMLInputElement>) => {\n        const file = e.target.files?.[0];\n        setVideo(file || null);\n        setPostType(\"VIDEO\");\n    };\n\n    return (\n        <div className=\"card p-5 mb-8 shadow-md border-surface-200 bg-white\">\n            <form onSubmit={handleSubmit} className=\"space-y-4\">\n                <div className=\"flex space-x-4\">\n                    <div className=\"w-10 h-10 bg-primary-100 rounded-full flex-shrink-0 flex items-center justify-center text-primary-600 font-bold\">\n                        {/* Avatar placeholder or user inital */}\n                        ?\n                    </div>\n                    <textarea\n                        value={content}\n                        onChange={(e) => setContent(e.target.value)}\n                        placeholder=\"What's happening?\"\n                        rows={2}\n                        className=\"w-full bg-transparent border-none focus:ring-0 text-lg placeholder-surface-400 resize-none pt-2\"\n                    />\n                </div>\n\n                <div className=\"flex items-center justify-between pt-3 border-t border-surface-100\">\n                    <div className=\"flex items-center space-x-2\">\n                        <label className=\"flex items-center space-x-2 cursor-pointer p-2 hover:bg-primary-50 rounded-xl transition-all group\">\n                            <input\n                                type=\"file\"\n                                multiple\n                                accept=\"image/*\"\n                                onChange={handleImageChange}\n                                className=\"hidden\"\n                            />\n                            <span className=\"text-xl group-hover:scale-110 transition-transform\">üñºÔ∏è</span>\n                            <span className=\"text-sm font-semibold text-surface-600 group-hover:text-primary-600\">Photo</span>\n                        </label>\n\n                        <label className=\"flex items-center space-x-2 cursor-pointer p-2 hover:bg-blue-50 rounded-xl transition-all group\">\n                            <input\n                                type=\"file\"\n                                accept=\"video/*\"\n                                onChange={handleVideoChange}\n                                className=\"hidden\"\n                            />\n                            <span className=\"text-xl group-hover:scale-110 transition-transform\">üé•</span>\n                            <span className=\"text-sm font-semibold text-surface-600 group-hover:text-blue-600\">Video</span>\n                        </label>\n                    </div>\n\n                    <button\n                        type=\"submit\"\n                        disabled={loading || !content.trim()}\n                        className=\"btn-primary px-6 py-2 rounded-full font-bold disabled:bg-surface-200 disabled:text-surface-400\"\n                    >\n                        {loading ? \"...\" : \"Post\"}\n                    </button>\n                </div>\n\n                {(images || video) && (\n                    <div className=\"bg-surface-50 p-3 rounded-xl flex items-center justify-between border border-surface-200 animate-in\">\n                        <div className=\"flex items-center space-x-2 text-sm text-surface-600 font-medium\">\n                            {images ? (\n                                <><span>üì∏</span> <span>{images.length} images selected</span></>\n                            ) : (\n                                <><span>üé¨</span> <span>{video?.name}</span></>\n                            )}\n                        </div>\n                        <button\n                            type=\"button\"\n                            onClick={() => { setImages(null); setVideo(null); setPostType(\"TEXT\"); }}\n                            className=\"text-red-500 hover:bg-red-50 p-1 rounded-lg\"\n                        >\n                            ‚úï\n                        </button>\n                    </div>\n                )}\n\n                {error && (\n                    <div className=\"bg-red-50 text-red-600 text-xs p-2 rounded-lg border border-red-100\">\n                        {error}\n                    </div>\n                )}\n            </form>\n        </div>\n    );\n}\n\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 301, "column": 0}, "map": {"version":3,"sources":["file:///Users/vishalsharma/Downloads/Social-Media-FullStack/social-frontend/src/components/PostCard.tsx"],"sourcesContent":["// components/PostCard.tsx\n\"use client\";\nimport { useState } from \"react\";\nimport { auth } from \"@/lib/auth\";\nimport { Post } from \"@/lib/types\";\nimport api from \"@/lib/api\";\n\ninterface Props {\n    post: Post;\n    onUpdate: (updatedPost: Post) => void;\n}\n\nexport default function PostCard({ post, onUpdate }: Props) {\n    const [comment, setComment] = useState(\"\");\n    const [showComments, setShowComments] = useState(false);\n    const currentUser = auth.getUser();\n\n    // ‚úÖ ADD THIS: Build full URL for media\n    const getMediaUrl = (path: string) => {\n        if (!path) return \"\";\n        if (path.startsWith(\"http\")) return path;\n        return `http://localhost:8082${path}`; // Post Service URL\n    };\n\n    const toggleLike = async () => {\n        // Optimistic Update\n        const originalPost = { ...post };\n        const isLiked = !post.isLiked;\n        const likesCount = isLiked ? post.likesCount + 1 : Math.max(0, post.likesCount - 1);\n\n        onUpdate({\n            ...post,\n            isLiked,\n            likesCount\n        });\n\n        try {\n            const endpoint = `/api/posts/${post.id}/like`;\n            const response = post.isLiked\n                ? await api.delete<Post>(endpoint)\n                : await api.post<Post>(endpoint);\n\n            // Update with actual data from server\n            onUpdate(response.data);\n        } catch (error) {\n            console.error(\"Failed to toggle like:\", error);\n            // Revert on error\n            onUpdate(originalPost);\n        }\n    };\n\n    const addComment = async () => {\n        if (!comment.trim() || !currentUser) return;\n\n        const originalPost = { ...post };\n        const newCommentText = comment;\n        setComment(\"\"); // Clear immediately\n\n        // Optimistic Update\n        const tempComment = {\n            id: `temp-${Date.now()}`,\n            userId: currentUser.id!,\n            username: currentUser.username!,\n            content: newCommentText,\n            createdAt: new Date().toISOString()\n        };\n\n        const updatedPost = {\n            ...post,\n            commentsCount: post.commentsCount + 1,\n            recentComments: [...(post.recentComments || []), tempComment]\n        };\n\n        onUpdate(updatedPost);\n\n        try {\n            const response = await api.post<Post>(`/api/posts/${post.id}/comments`, {\n                content: newCommentText,\n            });\n            // Update with actual data from server\n            onUpdate(response.data);\n        } catch (error) {\n            console.error(\"Failed to add comment:\", error);\n            // Revert on error\n            onUpdate(originalPost);\n            setComment(newCommentText); // Put text back so user doesn't lose it\n        }\n    };\n\n    // ‚úÖ FIX: Use post.images instead of post.imageUrls\n    const images = post.images || [];\n    const video = post.videoUrl;\n\n    return (\n        <div className=\"card mb-6 animate-in bg-white border-surface-200\">\n            {/* Header */}\n            <div className=\"p-4 flex items-center justify-between\">\n                <div className=\"flex items-center\">\n                    <div className=\"w-10 h-10 rounded-full bg-primary-100 flex items-center justify-center text-primary-600 font-bold overflow-hidden mr-3\">\n                        {post.userProfilePicture ? (\n                            <img\n                                src={getMediaUrl(post.userProfilePicture)}\n                                alt={post.username}\n                                className=\"w-full h-full object-cover\"\n                            />\n                        ) : (\n                            post.username.charAt(0).toUpperCase()\n                        )}\n                    </div>\n                    <div>\n                        <p className=\"font-bold text-surface-900 leading-tight hover:underline cursor-pointer\">\n                            {post.username}\n                        </p>\n                        <p className=\"text-[11px] font-medium text-surface-400 uppercase tracking-wider\">\n                            {new Date(post.createdAt).toLocaleDateString()} ‚Ä¢ {new Date(post.createdAt).toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })}\n                        </p>\n                    </div>\n                </div>\n                <button className=\"text-surface-400 hover:text-surface-600 p-1 rounded-full hover:bg-surface-50 transition-colors\">\n                    <span className=\"text-lg\">‚Ä¢‚Ä¢‚Ä¢</span>\n                </button>\n            </div>\n\n            {/* Content */}\n            <div className=\"px-4 pb-3\">\n                <p className=\"text-surface-800 leading-relaxed whitespace-pre-wrap\">{post.content}</p>\n            </div>\n\n            {/* ‚úÖ FIX: Images - use post.images and getMediaUrl */}\n            {images.length > 0 && (\n                <div className={`grid gap-1 mb-2 px-1 ${images.length > 1 ? 'grid-cols-2' : 'grid-cols-1'}`}>\n                    {images.map((url, idx) => (\n                        <img\n                            key={idx}\n                            src={getMediaUrl(url)}\n                            alt=\"Post content\"\n                            className={`w-full object-cover ${images.length === 1 ? 'max-h-[500px] rounded-lg' : 'h-48 rounded-md hover:opacity-95 transition-opacity'}`}\n                            onError={(e) => {\n                                console.error(\"Image failed to load:\", url);\n                                e.currentTarget.style.display = 'none';\n                            }}\n                        />\n                    ))}\n                </div>\n            )}\n\n            {/* ‚úÖ FIX: Video - use getMediaUrl */}\n            {video && (\n                <div className=\"px-1 mb-2\">\n                    <video controls className=\"w-full rounded-lg max-h-[500px] bg-black\">\n                        <source src={getMediaUrl(video)} />\n                    </video>\n                </div>\n            )}\n\n            {/* Actions */}\n            <div className=\"px-4 py-3 flex items-center justify-between border-t border-surface-50\">\n                <div className=\"flex items-center space-x-1\">\n                    <button\n                        onClick={toggleLike}\n                        className={`flex items-center space-x-2 px-3 py-1.5 rounded-full transition-all ${post.isLiked\n                            ? \"bg-red-50 text-red-600 font-bold\"\n                            : \"text-surface-600 hover:bg-red-50 hover:text-red-500\"\n                            }`}\n                    >\n                        <span className=\"text-lg\">{post.isLiked ? \"‚ù§Ô∏è\" : \"ü§ç\"}</span>\n                        <span className=\"text-sm\">{post.likesCount}</span>\n                    </button>\n\n                    <button\n                        onClick={() => setShowComments(!showComments)}\n                        className={`flex items-center space-x-2 px-3 py-1.5 rounded-full transition-all ${showComments\n                            ? \"bg-primary-50 text-primary-600 font-bold\"\n                            : \"text-surface-600 hover:bg-primary-50 hover:text-primary-600\"\n                            }`}\n                    >\n                        <span className=\"text-lg\">üí¨</span>\n                        <span className=\"text-sm\">{post.commentsCount}</span>\n                    </button>\n\n                    <button className=\"flex items-center space-x-2 text-surface-600 hover:bg-green-50 hover:text-green-600 px-3 py-1.5 rounded-full transition-all\">\n                        <span className=\"text-lg\">üîÅ</span>\n                        <span className=\"text-sm\">{post.sharesCount}</span>\n                    </button>\n                </div>\n\n                <button className=\"text-surface-400 hover:text-primary-600 p-2 rounded-full hover:bg-primary-50 transition-all\">\n                    <span>üîñ</span>\n                </button>\n            </div>\n\n            {/* Comments Section */}\n            {showComments && (\n                <div className=\"px-4 pb-4 border-t border-surface-50 bg-surface-50/30\">\n                    <div className=\"pt-4 space-y-3\">\n                        {post.recentComments?.map((c) => (\n                            <div key={c.id} className=\"flex space-x-3 group\">\n                                <div className=\"w-8 h-8 rounded-full bg-surface-200 flex-shrink-0 flex items-center justify-center text-[10px] font-bold\">\n                                    {c.username.charAt(0).toUpperCase()}\n                                </div>\n                                <div className=\"bg-white px-3 py-2 rounded-2xl rounded-tl-none border border-surface-100 shadow-sm flex-grow\">\n                                    <p className=\"text-xs font-bold text-surface-900 mb-0.5\">{c.username}</p>\n                                    <p className=\"text-[13px] text-surface-700\">{c.content}</p>\n                                </div>\n                            </div>\n                        ))}\n                    </div>\n\n                    <div className=\"flex mt-4 items-center space-x-2 bg-white p-1 pl-3 rounded-full border border-surface-200 focus-within:ring-2 focus-within:ring-primary-100 transition-all\">\n                        <input\n                            value={comment}\n                            onChange={(e) => setComment(e.target.value)}\n                            placeholder=\"Write a comment...\"\n                            className=\"flex-grow bg-transparent border-none focus:ring-0 text-sm py-1.5\"\n                        />\n                        <button\n                            onClick={addComment}\n                            disabled={!comment.trim()}\n                            className=\"bg-primary-600 text-white p-2 rounded-full hover:bg-primary-700 disabled:bg-surface-200 transition-colors\"\n                        >\n                            <span className=\"block scale-75\">‚û§</span>\n                        </button>\n                    </div>\n                </div>\n            )}\n        </div>\n    );\n}"],"names":[],"mappings":"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"}},
    {"offset": {"line": 742, "column": 0}, "map": {"version":3,"sources":["file:///Users/vishalsharma/Downloads/Social-Media-FullStack/social-frontend/src/components/SuggestedUsers.tsx"],"sourcesContent":["// components/SuggestedUsers.tsx\n\"use client\";\nimport { useState, useEffect } from \"react\";\nimport api from \"@/lib/api\";\nimport { User } from \"@/lib/types\";\nimport Link from \"next/link\";\nimport { auth } from \"@/lib/auth\";\n\nexport default function SuggestedUsers() {\n    const [suggestions, setSuggestions] = useState<User[]>([]);\n    const [loading, setLoading] = useState(true);\n    const currentUser = auth.getUser();\n\n    useEffect(() => {\n        loadSuggestions();\n    }, []);\n\n    const loadSuggestions = async () => {\n        try {\n            // First try suggestions endpoint\n            const res = await api.get<User[]>(\"/api/users/suggestions\");\n            setSuggestions(res.data.slice(0, 5));\n        } catch (error) {\n            // Fallback: search or general user fetch\n            try {\n                const res = await api.get<User[]>(\"/api/users\");\n                setSuggestions(res.data.filter(u => u.username !== currentUser?.username).slice(0, 5));\n            } catch (e) { }\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    const handleFollow = async (userId: string) => {\n        try {\n            await api.post(`/api/users/follow/${userId}`);\n            // Optimistically update or reload\n            loadSuggestions();\n        } catch (error) {\n            console.error(\"Failed to follow:\", error);\n        }\n    };\n\n    if (loading) return (\n        <div className=\"animate-pulse space-y-4\">\n            <div className=\"h-4 bg-surface-100 rounded w-1/2\"></div>\n            {[1, 2, 3].map(i => (\n                <div key={i} className=\"flex items-center space-x-3\">\n                    <div className=\"w-10 h-10 bg-surface-100 rounded-full\"></div>\n                    <div className=\"flex-grow space-y-2\">\n                        <div className=\"h-3 bg-surface-100 rounded w-3/4\"></div>\n                        <div className=\"h-2 bg-surface-100 rounded w-1/2\"></div>\n                    </div>\n                </div>\n            ))}\n        </div>\n    );\n\n    if (suggestions.length === 0) return null;\n\n    return (\n        <div className=\"card p-5 bg-white border-surface-100 shadow-sm animate-in\">\n            <h3 className=\"font-black text-surface-900 text-xs uppercase tracking-widest mb-5 flex items-center justify-between\">\n                <span>Who to follow</span>\n                <Link href=\"/discover\" className=\"text-[10px] text-primary-600 hover:underline\">Explore</Link>\n            </h3>\n\n            <div className=\"space-y-5\">\n                {suggestions.map((user) => (\n                    <div key={user.id} className=\"flex items-center justify-between group\">\n                        <Link href={`/profile/${user.username}`} className=\"flex items-center space-x-3 flex-grow\">\n                            <div className=\"w-10 h-10 rounded-full bg-primary-100 flex items-center justify-center text-primary-600 font-bold overflow-hidden border border-surface-100\">\n                                {user.profilePicture ? (\n                                    <img\n                                        src={user.profilePicture.startsWith('http') ? user.profilePicture : `http://localhost:8082${user.profilePicture}`}\n                                        alt={user.username}\n                                        className=\"w-full h-full object-cover\"\n                                    />\n                                ) : (\n                                    user.username.charAt(0).toUpperCase()\n                                )}\n                            </div>\n                            <div className=\"min-w-0\">\n                                <p className=\"text-sm font-bold text-surface-900 truncate tracking-tight\">{user.fullName || user.username}</p>\n                                <p className=\"text-[11px] text-surface-400 font-medium truncate\">@{user.username}</p>\n                            </div>\n                        </Link>\n\n                        <button\n                            onClick={() => handleFollow(user.id)}\n                            className=\"text-xs font-black text-primary-600 hover:bg-primary-50 px-3 py-1.5 rounded-full transition-all\"\n                        >\n                            Follow\n                        </button>\n                    </div>\n                ))}\n            </div>\n\n            <button className=\"w-full mt-6 py-2.5 text-xs font-bold text-surface-500 hover:bg-surface-50 rounded-xl transition-colors border border-surface-100\">\n                Show more\n            </button>\n        </div>\n    );\n}\n"],"names":[],"mappings":"AAAA,gCAAgC;;;;;;AAEhC;AACA;AAEA;AACA;AALA;;;;;;AAOe,SAAS;IACpB,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,uOAAQ,EAAS,EAAE;IACzD,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,uOAAQ,EAAC;IACvC,MAAM,cAAc,gJAAI,CAAC,OAAO;IAEhC,IAAA,wOAAS,EAAC;QACN;IACJ,GAAG,EAAE;IAEL,MAAM,kBAAkB;QACpB,IAAI;YACA,iCAAiC;YACjC,MAAM,MAAM,MAAM,kJAAG,CAAC,GAAG,CAAS;YAClC,eAAe,IAAI,IAAI,CAAC,KAAK,CAAC,GAAG;QACrC,EAAE,OAAO,OAAO;YACZ,yCAAyC;YACzC,IAAI;gBACA,MAAM,MAAM,MAAM,kJAAG,CAAC,GAAG,CAAS;gBAClC,eAAe,IAAI,IAAI,CAAC,MAAM,CAAC,CAAA,IAAK,EAAE,QAAQ,KAAK,aAAa,UAAU,KAAK,CAAC,GAAG;YACvF,EAAE,OAAO,GAAG,CAAE;QAClB,SAAU;YACN,WAAW;QACf;IACJ;IAEA,MAAM,eAAe,OAAO;QACxB,IAAI;YACA,MAAM,kJAAG,CAAC,IAAI,CAAC,CAAC,kBAAkB,EAAE,QAAQ;YAC5C,kCAAkC;YAClC;QACJ,EAAE,OAAO,OAAO;YACZ,QAAQ,KAAK,CAAC,qBAAqB;QACvC;IACJ;IAEA,IAAI,SAAS,qBACT,oQAAC;QAAI,WAAU;;0BACX,oQAAC;gBAAI,WAAU;;;;;;YACd;gBAAC;gBAAG;gBAAG;aAAE,CAAC,GAAG,CAAC,CAAA,kBACX,oQAAC;oBAAY,WAAU;;sCACnB,oQAAC;4BAAI,WAAU;;;;;;sCACf,oQAAC;4BAAI,WAAU;;8CACX,oQAAC;oCAAI,WAAU;;;;;;8CACf,oQAAC;oCAAI,WAAU;;;;;;;;;;;;;mBAJb;;;;;;;;;;;IAWtB,IAAI,YAAY,MAAM,KAAK,GAAG,OAAO;IAErC,qBACI,oQAAC;QAAI,WAAU;;0BACX,oQAAC;gBAAG,WAAU;;kCACV,oQAAC;kCAAK;;;;;;kCACN,oQAAC,6LAAI;wBAAC,MAAK;wBAAY,WAAU;kCAA+C;;;;;;;;;;;;0BAGpF,oQAAC;gBAAI,WAAU;0BACV,YAAY,GAAG,CAAC,CAAC,qBACd,oQAAC;wBAAkB,WAAU;;0CACzB,oQAAC,6LAAI;gCAAC,MAAM,CAAC,SAAS,EAAE,KAAK,QAAQ,EAAE;gCAAE,WAAU;;kDAC/C,oQAAC;wCAAI,WAAU;kDACV,KAAK,cAAc,iBAChB,oQAAC;4CACG,KAAK,KAAK,cAAc,CAAC,UAAU,CAAC,UAAU,KAAK,cAAc,GAAG,CAAC,qBAAqB,EAAE,KAAK,cAAc,EAAE;4CACjH,KAAK,KAAK,QAAQ;4CAClB,WAAU;;;;;mDAGd,KAAK,QAAQ,CAAC,MAAM,CAAC,GAAG,WAAW;;;;;;kDAG3C,oQAAC;wCAAI,WAAU;;0DACX,oQAAC;gDAAE,WAAU;0DAA8D,KAAK,QAAQ,IAAI,KAAK,QAAQ;;;;;;0DACzG,oQAAC;gDAAE,WAAU;;oDAAoD;oDAAE,KAAK,QAAQ;;;;;;;;;;;;;;;;;;;0CAIxF,oQAAC;gCACG,SAAS,IAAM,aAAa,KAAK,EAAE;gCACnC,WAAU;0CACb;;;;;;;uBAtBK,KAAK,EAAE;;;;;;;;;;0BA6BzB,oQAAC;gBAAO,WAAU;0BAAmI;;;;;;;;;;;;AAKjK"}},
    {"offset": {"line": 975, "column": 0}, "map": {"version":3,"sources":["file:///Users/vishalsharma/Downloads/Social-Media-FullStack/social-frontend/src/app/%28app%29/feed/page.tsx"],"sourcesContent":["// app/(app)/feed/page.tsx\n\"use client\";\nimport { useEffect, useState } from \"react\";\nimport api from \"@/lib/api\";\nimport { Post, PageResponse } from \"@/lib/types\";\nimport CreatePost from \"@/components/CreatePost\";\nimport PostCard from \"@/components/PostCard\";\n\nimport SuggestedUsers from \"@/components/SuggestedUsers\";\nimport Link from \"next/link\";\n\nexport default function FeedPage() {\n    const [posts, setPosts] = useState<Post[]>([]);\n    const [loading, setLoading] = useState(true);\n    const [page, setPage] = useState(0);\n    const [hasMore, setHasMore] = useState(true);\n\n    const loadFeed = async (pageNum: number = 0) => {\n        try {\n            const response = await api.get<PageResponse<Post>>(\"/api/posts/feed\", {\n                params: { page: pageNum, size: 20 },\n            });\n\n            if (pageNum === 0) {\n                setPosts(response.data.content);\n            } else {\n                setPosts((prev) => [...prev, ...response.data.content]);\n            }\n\n            setHasMore(response.data.number < response.data.totalPages - 1);\n        } catch (error) {\n            console.error(\"Failed to load feed:\", error);\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    useEffect(() => {\n        loadFeed(0);\n    }, []);\n\n    const handlePostUpdate = (updatedPost: Post) => {\n        setPosts((prev) =>\n            prev.map((p) => (p.id === updatedPost.id ? updatedPost : p))\n        );\n    };\n\n    const loadMore = () => {\n        const nextPage = page + 1;\n        setPage(nextPage);\n        loadFeed(nextPage);\n    };\n\n    if (loading) {\n        return (\n            <div className=\"flex flex-col items-center justify-center py-20 space-y-4\">\n                <div className=\"w-12 h-12 border-4 border-primary-100 border-t-primary-600 rounded-full animate-spin\" />\n                <p className=\"text-surface-500 font-bold uppercase tracking-widest text-xs\">Curating your feed...</p>\n            </div>\n        );\n    }\n\n    return (\n        <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-8\">\n            <div className=\"lg:col-span-2\">\n                <CreatePost onPostCreated={() => loadFeed(0)} />\n\n                <div className=\"space-y-4\">\n                    {posts.length > 0 ? (\n                        posts.map((post) => (\n                            <PostCard key={post.id} post={post} onUpdate={handlePostUpdate} />\n                        ))\n                    ) : (\n                        <div className=\"text-center py-20 bg-white rounded-2xl border border-dashed border-surface-200\">\n                            <span className=\"text-4xl block mb-4\">üè†</span>\n                            <p className=\"text-surface-500 font-medium\">Your feed is quiet. Try following some people!</p>\n                            <Link href=\"/discover\" className=\"mt-4 inline-block btn-primary px-6 py-2 rounded-full text-sm\">\n                                Find People\n                            </Link>\n                        </div>\n                    )}\n                </div>\n\n                {hasMore && (\n                    <div className=\"text-center mt-12 pb-12\">\n                        <button\n                            onClick={loadMore}\n                            className=\"px-8 py-3 bg-white border border-surface-200 text-surface-600 font-bold rounded-full hover:bg-primary-50 hover:text-primary-600 hover:border-primary-200 transition-all shadow-sm active:scale-95\"\n                        >\n                            Load More Posts\n                        </button>\n                    </div>\n                )}\n            </div>\n\n            <div className=\"hidden lg:block space-y-6\">\n                <SuggestedUsers />\n\n                <div className=\"card p-6 bg-white border-surface-100 shadow-sm\">\n                    <h3 className=\"font-black text-surface-900 text-xs uppercase tracking-widest mb-4\">Trending</h3>\n                    <div className=\"space-y-4\">\n                        {['#WorldNews', '#Technology', '#Sport', '#Design'].map(tag => (\n                            <div key={tag} className=\"cursor-pointer group\">\n                                <p className=\"text-sm font-bold text-surface-800 group-hover:text-primary-600 transition-colors\">{tag}</p>\n                                <p className=\"text-[10px] text-surface-400 font-bold tracking-tight\">2.4k Posts</p>\n                            </div>\n                        ))}\n                    </div>\n                </div>\n\n                <div className=\"px-4 text-[10px] text-surface-400 font-bold uppercase tracking-wider space-y-1\">\n                    <p>¬© 2024 SOCIAL MEDIA</p>\n                    <div className=\"flex space-x-3\">\n                        <span className=\"hover:underline cursor-pointer\">Privacy</span>\n                        <span className=\"hover:underline cursor-pointer\">Terms</span>\n                        <span className=\"hover:underline cursor-pointer\">Safety</span>\n                    </div>\n                </div>\n            </div>\n        </div>\n    );\n}\n\n\n"],"names":[],"mappings":"AAAA,0BAA0B;;;;;;AAE1B;AACA;AAEA;AACA;AAEA;AACA;AARA;;;;;;;;AAUe,SAAS;IACpB,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,uOAAQ,EAAS,EAAE;IAC7C,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,uOAAQ,EAAC;IACvC,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,uOAAQ,EAAC;IACjC,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,uOAAQ,EAAC;IAEvC,MAAM,WAAW,OAAO,UAAkB,CAAC;QACvC,IAAI;YACA,MAAM,WAAW,MAAM,kJAAG,CAAC,GAAG,CAAqB,mBAAmB;gBAClE,QAAQ;oBAAE,MAAM;oBAAS,MAAM;gBAAG;YACtC;YAEA,IAAI,YAAY,GAAG;gBACf,SAAS,SAAS,IAAI,CAAC,OAAO;YAClC,OAAO;gBACH,SAAS,CAAC,OAAS;2BAAI;2BAAS,SAAS,IAAI,CAAC,OAAO;qBAAC;YAC1D;YAEA,WAAW,SAAS,IAAI,CAAC,MAAM,GAAG,SAAS,IAAI,CAAC,UAAU,GAAG;QACjE,EAAE,OAAO,OAAO;YACZ,QAAQ,KAAK,CAAC,wBAAwB;QAC1C,SAAU;YACN,WAAW;QACf;IACJ;IAEA,IAAA,wOAAS,EAAC;QACN,SAAS;IACb,GAAG,EAAE;IAEL,MAAM,mBAAmB,CAAC;QACtB,SAAS,CAAC,OACN,KAAK,GAAG,CAAC,CAAC,IAAO,EAAE,EAAE,KAAK,YAAY,EAAE,GAAG,cAAc;IAEjE;IAEA,MAAM,WAAW;QACb,MAAM,WAAW,OAAO;QACxB,QAAQ;QACR,SAAS;IACb;IAEA,IAAI,SAAS;QACT,qBACI,oQAAC;YAAI,WAAU;;8BACX,oQAAC;oBAAI,WAAU;;;;;;8BACf,oQAAC;oBAAE,WAAU;8BAA+D;;;;;;;;;;;;IAGxF;IAEA,qBACI,oQAAC;QAAI,WAAU;;0BACX,oQAAC;gBAAI,WAAU;;kCACX,oQAAC,iKAAU;wBAAC,eAAe,IAAM,SAAS;;;;;;kCAE1C,oQAAC;wBAAI,WAAU;kCACV,MAAM,MAAM,GAAG,IACZ,MAAM,GAAG,CAAC,CAAC,qBACP,oQAAC,+JAAQ;gCAAe,MAAM;gCAAM,UAAU;+BAA/B,KAAK,EAAE;;;;sDAG1B,oQAAC;4BAAI,WAAU;;8CACX,oQAAC;oCAAK,WAAU;8CAAsB;;;;;;8CACtC,oQAAC;oCAAE,WAAU;8CAA+B;;;;;;8CAC5C,oQAAC,6LAAI;oCAAC,MAAK;oCAAY,WAAU;8CAA+D;;;;;;;;;;;;;;;;;oBAO3G,yBACG,oQAAC;wBAAI,WAAU;kCACX,cAAA,oQAAC;4BACG,SAAS;4BACT,WAAU;sCACb;;;;;;;;;;;;;;;;;0BAOb,oQAAC;gBAAI,WAAU;;kCACX,oQAAC,qKAAc;;;;;kCAEf,oQAAC;wBAAI,WAAU;;0CACX,oQAAC;gCAAG,WAAU;0CAAqE;;;;;;0CACnF,oQAAC;gCAAI,WAAU;0CACV;oCAAC;oCAAc;oCAAe;oCAAU;iCAAU,CAAC,GAAG,CAAC,CAAA,oBACpD,oQAAC;wCAAc,WAAU;;0DACrB,oQAAC;gDAAE,WAAU;0DAAqF;;;;;;0DAClG,oQAAC;gDAAE,WAAU;0DAAwD;;;;;;;uCAF/D;;;;;;;;;;;;;;;;kCAQtB,oQAAC;wBAAI,WAAU;;0CACX,oQAAC;0CAAE;;;;;;0CACH,oQAAC;gCAAI,WAAU;;kDACX,oQAAC;wCAAK,WAAU;kDAAiC;;;;;;kDACjD,oQAAC;wCAAK,WAAU;kDAAiC;;;;;;kDACjD,oQAAC;wCAAK,WAAU;kDAAiC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAMzE"}}]
}