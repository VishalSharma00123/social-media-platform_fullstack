{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/vishalsharma/Downloads/Social-Media-FullStack/social-frontend/src/app/%28app%29/discover/page.tsx"],"sourcesContent":["// app/(app)/discover/page.tsx\n\"use client\";\nimport { useState, useEffect } from \"react\";\nimport api from \"@/lib/api\";\nimport { User } from \"@/lib/types\";\nimport Link from \"next/link\";\nimport { auth } from \"@/lib/auth\";\n\nexport default function DiscoverPage() {\n    const [searchQuery, setSearchQuery] = useState(\"\");\n    const [searchResults, setSearchResults] = useState<User[]>([]);\n    const [suggestions, setSuggestions] = useState<User[]>([]);\n    const [loading, setLoading] = useState(false);\n    const currentUser = auth.getUser();\n\n    useEffect(() => {\n        loadSuggestions();\n    }, []);\n\n    const loadSuggestions = async () => {\n        try {\n            // Assuming an endpoint for suggestions or just fetch all to simulate\n            const response = await api.get<User[]>(\"/api/users/suggestions\");\n            setSuggestions(response.data);\n        } catch (error) {\n            console.error(\"Failed to load suggestions:\", error);\n            // Fallback: just fetch some users if suggestions endpoint doesn't exist\n            try {\n                const res = await api.get<User[]>(\"/api/users\");\n                setSuggestions(res.data.filter(u => u.username !== currentUser?.username).slice(0, 5));\n            } catch (e) { }\n        }\n    };\n\n    const handleSearch = async (e: React.FormEvent) => {\n        e.preventDefault();\n        if (!searchQuery.trim()) return;\n\n        setLoading(true);\n        try {\n            const response = await api.get<User[]>(`/api/users/search`, {\n                params: { query: searchQuery }\n            });\n            setSearchResults(response.data);\n        } catch (error) {\n            console.error(\"Search failed:\", error);\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    const handleFollow = async (userId: string) => {\n        try {\n            await api.post(`/api/users/follow/${userId}`);\n            // Refresh counts/state\n            if (searchQuery) handleSearch({ preventDefault: () => { } } as any);\n            loadSuggestions();\n        } catch (error) {\n            console.error(\"Failed to follow:\", error);\n        }\n    };\n\n    const UserCard = ({ user }: { user: User }) => (\n        <div className=\"card p-4 flex items-center justify-between hover:bg-surface-50 transition-all border-surface-100 mb-3 bg-white\">\n            <Link href={`/profile/${user.username}`} className=\"flex items-center space-x-4 flex-grow\">\n                <div className=\"w-12 h-12 rounded-full bg-primary-100 flex items-center justify-center text-primary-600 font-bold overflow-hidden border-2 border-white shadow-sm\">\n                    {user.profilePicture ? (\n                        <img src={user.profilePicture.startsWith('http') ? user.profilePicture : `http://localhost:8082${user.profilePicture}`} alt={user.username} className=\"w-full h-full object-cover\" />\n                    ) : (\n                        user.username.charAt(0).toUpperCase()\n                    )}\n                </div>\n                <div>\n                    <h3 className=\"font-bold text-surface-900 leading-tight\">{user.fullName || user.username}</h3>\n                    <p className=\"text-sm text-surface-500\">@{user.username}</p>\n                    <p className=\"text-xs text-surface-400 mt-0.5\">{user.followersCount} followers</p>\n                </div>\n            </Link>\n\n            {user.username !== currentUser?.username && (\n                <button\n                    onClick={() => handleFollow(user.id)}\n                    className={`px-5 py-1.5 rounded-full text-xs font-bold transition-all ${user.isFollowing\n                            ? \"bg-surface-100 text-surface-600 hover:bg-surface-200\"\n                            : \"bg-primary-600 text-white hover:bg-primary-700 shadow-sm\"\n                        }`}\n                >\n                    {user.isFollowing ? \"Following\" : \"Follow\"}\n                </button>\n            )}\n        </div>\n    );\n\n    return (\n        <div className=\"max-w-4xl mx-auto space-y-8 h-full\">\n            <div className=\"card p-6 bg-primary-600 text-white shadow-xl border-none relative overflow-hidden\">\n                <div className=\"absolute top-[-20%] right-[-10%] w-64 h-64 bg-white/10 rounded-full blur-3xl\" />\n                <div className=\"relative z-10\">\n                    <h1 className=\"text-3xl font-black tracking-tight mb-2\">Discover People</h1>\n                    <p className=\"text-primary-100 font-medium\">Find your friends and build your community</p>\n\n                    <form onSubmit={handleSearch} className=\"mt-6 relative flex items-center max-w-xl\">\n                        <input\n                            type=\"text\"\n                            value={searchQuery}\n                            onChange={(e) => setSearchQuery(e.target.value)}\n                            placeholder=\"Search by name or username...\"\n                            className=\"w-full pl-12 pr-4 py-3.5 bg-white text-surface-900 rounded-2xl focus:outline-none focus:ring-4 focus:ring-white/20 shadow-lg text-sm\"\n                        />\n                        <span className=\"absolute left-4 text-surface-400 text-xl\">üîç</span>\n                        <button\n                            type=\"submit\"\n                            className=\"absolute right-2 px-4 py-2 bg-primary-600 text-white rounded-xl font-bold text-xs hover:bg-primary-700 transition-colors\"\n                        >\n                            Search\n                        </button>\n                    </form>\n                </div>\n            </div>\n\n            <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-8\">\n                <div className=\"lg:col-span-2 space-y-6\">\n                    {searchQuery && (\n                        <div className=\"animate-in\">\n                            <div className=\"flex items-center justify-between mb-4\">\n                                <h2 className=\"text-xl font-black text-surface-900 tracking-tight flex items-center\">\n                                    Search Results\n                                    {loading && <span className=\"ml-3 animate-spin text-primary-600 text-sm\">‚óå</span>}\n                                </h2>\n                                <button onClick={() => setSearchResults([])} className=\"text-xs font-bold text-surface-400 hover:text-primary-600\">Clear</button>\n                            </div>\n                            {searchResults.length > 0 ? (\n                                <div className=\"space-y-1\">\n                                    {searchResults.map(user => <UserCard key={user.id} user={user} />)}\n                                </div>\n                            ) : (\n                                !loading && <div className=\"text-center py-12 bg-white rounded-2xl border border-dashed border-surface-200\">\n                                    <p className=\"text-surface-400 font-medium\">No users found matching \"{searchQuery}\"</p>\n                                </div>\n                            )}\n                        </div>\n                    )}\n\n                    <div className=\"space-y-4\">\n                        <h2 className=\"text-xl font-black text-surface-900 tracking-tight\">Suggested for you</h2>\n                        <div className=\"space-y-1\">\n                            {suggestions.length > 0 ? (\n                                suggestions.map(user => <UserCard key={user.id} user={user} />)\n                            ) : (\n                                <div className=\"text-center py-12 bg-white rounded-2xl border border-dashed border-surface-200\">\n                                    <p className=\"text-surface-400 font-medium\">Looking for people to suggest...</p>\n                                </div>\n                            )}\n                        </div>\n                    </div>\n                </div>\n\n                <div className=\"space-y-6\">\n                    <div className=\"card p-6 bg-white border-surface-200 shadow-sm\">\n                        <h3 className=\"font-black text-surface-900 text-sm uppercase tracking-widest mb-4\">Trending Today</h3>\n                        <div className=\"space-y-4\">\n                            {['#ReactJS', '#NextJS', '#TailwindCSS', '#FullStack'].map(tag => (\n                                <div key={tag} className=\"group cursor-pointer\">\n                                    <p className=\"text-sm font-bold text-surface-900 group-hover:text-primary-600 transition-colors\">{tag}</p>\n                                    <p className=\"text-[10px] text-surface-400 font-bold uppercase tracking-tighter\">1.2k posts</p>\n                                </div>\n                            ))}\n                        </div>\n                        <button className=\"w-full mt-6 py-2 text-xs font-bold text-primary-600 hover:bg-primary-50 rounded-lg transition-colors\">\n                            Show more\n                        </button>\n                    </div>\n\n                    <div className=\"text-[10px] text-surface-400 px-2 space-y-1\">\n                        <p>¬© 2024 SOCIAL MEDIA INC.</p>\n                        <div className=\"flex space-x-2\">\n                            <span className=\"hover:underline cursor-pointer\">Privacy</span>\n                            <span className=\"hover:underline cursor-pointer\">Terms</span>\n                            <span className=\"hover:underline cursor-pointer\">Help</span>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    );\n}\n"],"names":[],"mappings":"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"}}]
}