{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/vishalsharma/Downloads/Social-Media-FullStack/social-frontend/src/app/%28app%29/notifications/page.tsx"],"sourcesContent":["// app/(app)/notifications/page.tsx\n\"use client\";\nimport { useEffect, useState } from \"react\";\nimport api from \"@/lib/api\";\nimport { Notification, PageResponse } from \"@/lib/types\";\n\nexport default function NotificationsPage() {\n    const [notifications, setNotifications] = useState<Notification[]>([]);\n    const [loading, setLoading] = useState(true);\n\n    useEffect(() => {\n        loadNotifications();\n    }, []); // [] -> empty dependency array means this effect runs only once after the initial render\n\n    const loadNotifications = async () => {\n        try {\n            const response = await api.get<PageResponse<Notification>>(\n                \"/api/notifications\",\n                { params: { unreadOnly: false, page: 0, size: 50 } }\n            );\n            setNotifications(response.data.content);\n        } catch (error) {\n            console.error(\"Failed to load notifications:\", error);\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    const markAsRead = async (id: string) => {\n        try {\n            await api.put(`/api/notifications/${id}/read`);\n            setNotifications((prev) =>\n                prev.map((n) => (n.id === id ? { ...n, read: true } : n))\n            );\n        } catch (error) {\n            console.error(\"Failed to mark as read:\", error);\n        }\n    };\n\n    const markAllAsRead = async () => {\n        try {\n            await api.put(\"/api/notifications/mark-all-read\");\n            setNotifications((prev) => prev.map((n) => ({ ...n, read: true })));\n        } catch (error) {\n            console.error(\"Failed to mark all as read:\", error);\n        }\n    };\n\n    if (loading) {\n        return <div className=\"text-center py-8\">Loading notifications...</div>;\n    }\n\n    return (\n        <div className=\"max-w-2xl mx-auto\">\n            <div className=\"flex items-center justify-between mb-6\">\n                <h1 className=\"text-2xl font-bold\">Notifications</h1>\n                <button\n                    onClick={markAllAsRead}\n                    className=\"text-blue-600 hover:text-blue-700 text-sm\"\n                >\n                    Mark all as read\n                </button>\n            </div>\n\n            <div className=\"bg-white rounded-lg shadow divide-y\">\n                {notifications.length === 0 ? (\n                    <p className=\"p-6 text-center text-gray-500\">No notifications</p>\n                ) : (\n                    notifications.map((notification) => (\n                        <div\n                            key={notification.id}\n                            onClick={() => !notification.read && markAsRead(notification.id)}\n                            className={`p-4 cursor-pointer hover:bg-gray-50 ${!notification.read ? \"bg-blue-50\" : \"\"\n                                }`}\n                        >\n                            <div className=\"flex items-start justify-between\">\n                                <div className=\"flex-grow\">\n                                    <p className=\"font-semibold text-sm\">{notification.title}</p>\n                                    <p className=\"text-gray-700 mt-1\">{notification.message}</p>\n                                    <p className=\"text-xs text-gray-500 mt-2\">\n                                        {new Date(notification.createdAt).toLocaleString()}\n                                    </p>\n                                </div>\n                                {!notification.read && (\n                                    <div className=\"w-2 h-2 bg-blue-600 rounded-full ml-4 mt-2\"></div>\n                                )}\n                            </div>\n                        </div>\n                    ))\n                )}\n            </div>\n        </div>\n    );\n}\n"],"names":[],"mappings":"AAAA,mCAAmC;;;;;;AAEnC;AACA;AAFA;;;;AAKe,SAAS;IACpB,MAAM,CAAC,eAAe,iBAAiB,GAAG,IAAA,uOAAQ,EAAiB,EAAE;IACrE,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,uOAAQ,EAAC;IAEvC,IAAA,wOAAS,EAAC;QACN;IACJ,GAAG,EAAE,GAAG,yFAAyF;IAEjG,MAAM,oBAAoB;QACtB,IAAI;YACA,MAAM,WAAW,MAAM,kJAAG,CAAC,GAAG,CAC1B,sBACA;gBAAE,QAAQ;oBAAE,YAAY;oBAAO,MAAM;oBAAG,MAAM;gBAAG;YAAE;YAEvD,iBAAiB,SAAS,IAAI,CAAC,OAAO;QAC1C,EAAE,OAAO,OAAO;YACZ,QAAQ,KAAK,CAAC,iCAAiC;QACnD,SAAU;YACN,WAAW;QACf;IACJ;IAEA,MAAM,aAAa,OAAO;QACtB,IAAI;YACA,MAAM,kJAAG,CAAC,GAAG,CAAC,CAAC,mBAAmB,EAAE,GAAG,KAAK,CAAC;YAC7C,iBAAiB,CAAC,OACd,KAAK,GAAG,CAAC,CAAC,IAAO,EAAE,EAAE,KAAK,KAAK;wBAAE,GAAG,CAAC;wBAAE,MAAM;oBAAK,IAAI;QAE9D,EAAE,OAAO,OAAO;YACZ,QAAQ,KAAK,CAAC,2BAA2B;QAC7C;IACJ;IAEA,MAAM,gBAAgB;QAClB,IAAI;YACA,MAAM,kJAAG,CAAC,GAAG,CAAC;YACd,iBAAiB,CAAC,OAAS,KAAK,GAAG,CAAC,CAAC,IAAM,CAAC;wBAAE,GAAG,CAAC;wBAAE,MAAM;oBAAK,CAAC;QACpE,EAAE,OAAO,OAAO;YACZ,QAAQ,KAAK,CAAC,+BAA+B;QACjD;IACJ;IAEA,IAAI,SAAS;QACT,qBAAO,oQAAC;YAAI,WAAU;sBAAmB;;;;;;IAC7C;IAEA,qBACI,oQAAC;QAAI,WAAU;;0BACX,oQAAC;gBAAI,WAAU;;kCACX,oQAAC;wBAAG,WAAU;kCAAqB;;;;;;kCACnC,oQAAC;wBACG,SAAS;wBACT,WAAU;kCACb;;;;;;;;;;;;0BAKL,oQAAC;gBAAI,WAAU;0BACV,cAAc,MAAM,KAAK,kBACtB,oQAAC;oBAAE,WAAU;8BAAgC;;;;;2BAE7C,cAAc,GAAG,CAAC,CAAC,6BACf,oQAAC;wBAEG,SAAS,IAAM,CAAC,aAAa,IAAI,IAAI,WAAW,aAAa,EAAE;wBAC/D,WAAW,CAAC,oCAAoC,EAAE,CAAC,aAAa,IAAI,GAAG,eAAe,IAChF;kCAEN,cAAA,oQAAC;4BAAI,WAAU;;8CACX,oQAAC;oCAAI,WAAU;;sDACX,oQAAC;4CAAE,WAAU;sDAAyB,aAAa,KAAK;;;;;;sDACxD,oQAAC;4CAAE,WAAU;sDAAsB,aAAa,OAAO;;;;;;sDACvD,oQAAC;4CAAE,WAAU;sDACR,IAAI,KAAK,aAAa,SAAS,EAAE,cAAc;;;;;;;;;;;;gCAGvD,CAAC,aAAa,IAAI,kBACf,oQAAC;oCAAI,WAAU;;;;;;;;;;;;uBAdlB,aAAa,EAAE;;;;;;;;;;;;;;;;AAuBhD"}}]
}