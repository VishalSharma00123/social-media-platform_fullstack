{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 28, "column": 0}, "map": {"version":3,"sources":["file:///Users/vishalsharma/Downloads/Social-Media-FullStack/social-frontend/src/lib/auth.ts"],"sourcesContent":["// lib/auth.ts\nimport Cookies from \"js-cookie\";\nimport { LoginResponse, User } from \"./types\";\n\nexport const auth = {\n    // Save user session after login\n    setSession: (data: LoginResponse) => {\n        Cookies.set(\"token\", data.token, {\n            expires: 7, // 7 days\n            sameSite: \"lax\", // CSRF protection\n            secure: process.env.NODE_ENV === \"production\", // HTTPS only in production\n        });\n        Cookies.set(\"userId\", data.userId, { expires: 7, sameSite: \"lax\" });\n        Cookies.set(\"username\", data.username, { expires: 7, sameSite: \"lax\" });\n    },\n\n    // Clear session on logout\n    clearSession: () => {\n        Cookies.remove(\"token\");\n        Cookies.remove(\"userId\");\n        Cookies.remove(\"username\");\n    },\n\n    // Get current user info from cookies\n    getUser: (): Partial<User> | null => {\n        const userId = Cookies.get(\"userId\");\n        const username = Cookies.get(\"username\");\n\n        if (!userId || !username) return null;\n\n        return { id: userId, username };\n    },\n\n    // Check if user is authenticated\n    isAuthenticated: (): boolean => {\n        return !!Cookies.get(\"token\");\n    },\n\n    // Get token\n    getToken: (): string | undefined => {\n        return Cookies.get(\"token\");\n    },\n};\n"],"names":[],"mappings":"AAAA,cAAc;;;;;AACd;;AAGO,MAAM,OAAO;IAChB,gCAAgC;IAChC,YAAY,CAAC;QACT,sLAAO,CAAC,GAAG,CAAC,SAAS,KAAK,KAAK,EAAE;YAC7B,SAAS;YACT,UAAU;YACV,QAAQ,oDAAyB;QACrC;QACA,sLAAO,CAAC,GAAG,CAAC,UAAU,KAAK,MAAM,EAAE;YAAE,SAAS;YAAG,UAAU;QAAM;QACjE,sLAAO,CAAC,GAAG,CAAC,YAAY,KAAK,QAAQ,EAAE;YAAE,SAAS;YAAG,UAAU;QAAM;IACzE;IAEA,0BAA0B;IAC1B,cAAc;QACV,sLAAO,CAAC,MAAM,CAAC;QACf,sLAAO,CAAC,MAAM,CAAC;QACf,sLAAO,CAAC,MAAM,CAAC;IACnB;IAEA,qCAAqC;IACrC,SAAS;QACL,MAAM,SAAS,sLAAO,CAAC,GAAG,CAAC;QAC3B,MAAM,WAAW,sLAAO,CAAC,GAAG,CAAC;QAE7B,IAAI,CAAC,UAAU,CAAC,UAAU,OAAO;QAEjC,OAAO;YAAE,IAAI;YAAQ;QAAS;IAClC;IAEA,iCAAiC;IACjC,iBAAiB;QACb,OAAO,CAAC,CAAC,sLAAO,CAAC,GAAG,CAAC;IACzB;IAEA,YAAY;IACZ,UAAU;QACN,OAAO,sLAAO,CAAC,GAAG,CAAC;IACvB;AACJ"}},
    {"offset": {"line": 165, "column": 0}, "map": {"version":3,"sources":["file:///Users/vishalsharma/Downloads/Social-Media-FullStack/social-frontend/src/lib/api.ts"],"sourcesContent":["// lib/api.ts\nimport axios from \"axios\";\nimport Cookies from \"js-cookie\";\n\nconst api = axios.create({\n    baseURL: \"http://localhost:8080\",\n    timeout: 60000, // 60 seconds for file uploads\n    // ❌ REMOVE this - it breaks multipart/form-data\n    // headers: {\n    //     \"Content-Type\": \"application/json\",\n    // },\n});\n\n// Request interceptor\napi.interceptors.request.use(\n    (config) => {\n        const token = Cookies.get(\"token\");\n        const userId = Cookies.get(\"userId\");\n\n        if (token) {\n            config.headers[\"Authorization\"] = `Bearer ${token}`;\n        }\n\n        if (userId) {\n            config.headers[\"X-User-Id\"] = userId;\n        }\n\n        // ✅ Only set Content-Type for non-FormData requests\n        if (!(config.data instanceof FormData)) {\n            config.headers[\"Content-Type\"] = \"application/json\";\n        }\n\n        return config;\n    },\n    (error) => {\n        return Promise.reject(error);\n    }\n);\n\n// Response interceptor\napi.interceptors.response.use(\n    (response) => response,\n    (error) => {\n        if (error.response?.status === 401) {\n            Cookies.remove(\"token\");\n            Cookies.remove(\"userId\");\n            Cookies.remove(\"username\");\n            window.location.href = \"/login\";\n        }\n        return Promise.reject(error);\n    }\n);\n\nexport default api;"],"names":[],"mappings":"AAAA,aAAa;;;;;AACb;AACA;;;AAEA,MAAM,MAAM,sKAAK,CAAC,MAAM,CAAC;IACrB,SAAS;IACT,SAAS;AAKb;AAEA,sBAAsB;AACtB,IAAI,YAAY,CAAC,OAAO,CAAC,GAAG,CACxB,CAAC;IACG,MAAM,QAAQ,sLAAO,CAAC,GAAG,CAAC;IAC1B,MAAM,SAAS,sLAAO,CAAC,GAAG,CAAC;IAE3B,IAAI,OAAO;QACP,OAAO,OAAO,CAAC,gBAAgB,GAAG,CAAC,OAAO,EAAE,OAAO;IACvD;IAEA,IAAI,QAAQ;QACR,OAAO,OAAO,CAAC,YAAY,GAAG;IAClC;IAEA,oDAAoD;IACpD,IAAI,CAAC,CAAC,OAAO,IAAI,YAAY,QAAQ,GAAG;QACpC,OAAO,OAAO,CAAC,eAAe,GAAG;IACrC;IAEA,OAAO;AACX,GACA,CAAC;IACG,OAAO,QAAQ,MAAM,CAAC;AAC1B;AAGJ,uBAAuB;AACvB,IAAI,YAAY,CAAC,QAAQ,CAAC,GAAG,CACzB,CAAC,WAAa,UACd,CAAC;IACG,IAAI,MAAM,QAAQ,EAAE,WAAW,KAAK;QAChC,sLAAO,CAAC,MAAM,CAAC;QACf,sLAAO,CAAC,MAAM,CAAC;QACf,sLAAO,CAAC,MAAM,CAAC;QACf,OAAO,QAAQ,CAAC,IAAI,GAAG;IAC3B;IACA,OAAO,QAAQ,MAAM,CAAC;AAC1B;uCAGW"}},
    {"offset": {"line": 211, "column": 0}, "map": {"version":3,"sources":["file:///Users/vishalsharma/Downloads/Social-Media-FullStack/social-frontend/src/app/%28app%29/layout.tsx"],"sourcesContent":["// app/(app)/layout.tsx\n\"use client\";\nimport { useEffect, useState } from \"react\";\nimport { useRouter } from \"next/navigation\";\nimport Link from \"next/link\";\nimport { auth } from \"@/lib/auth\";\nimport api from \"@/lib/api\";\n\nexport default function AppLayout({ children }: { children: React.ReactNode }) {\n    const router = useRouter();\n    const [isReady, setIsReady] = useState(false);\n    const [unreadNotifications, setUnreadNotifications] = useState(0);\n    const currentUser = auth.getUser();\n\n    // Auth guard - redirect to login if not authenticated\n    useEffect(() => {\n        if (!auth.isAuthenticated()) {\n            router.replace(\"/login\");\n        } else {\n            setIsReady(true);\n            loadUnreadCount();\n        }\n    }, [router]);\n\n    const loadUnreadCount = async () => {\n        try {\n            const res = await api.get<{ count: number }>(\"/api/notifications/unread-count\");\n            setUnreadNotifications(res.data.count);\n        } catch (error) {\n            console.error(\"Failed to load unread count:\", error);\n        }\n    };\n\n    const handleLogout = () => {\n        auth.clearSession();\n        router.push(\"/login\");\n    };\n\n    if (!isReady) {\n        return (\n            <div className=\"min-h-screen flex items-center justify-center\">\n                <div className=\"text-gray-600\">Loading...</div>\n            </div>\n        );\n    }\n\n    return (\n        <div className=\"min-h-screen bg-surface-50 flex flex-col\">\n            {/* Navigation Header */}\n            <header className=\"bg-white/80 backdrop-blur-md border-b border-surface-100 sticky top-0 z-50\">\n                <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n                    <div className=\"flex items-center justify-between h-16\">\n                        <div className=\"flex items-center space-x-8\">\n                            <Link href=\"/feed\" className=\"text-2xl font-black text-primary-600 tracking-tight hover:scale-105 transition-transform\">\n                                SOCIAL\n                            </Link>\n\n                            <nav className=\"hidden md:flex items-center space-x-1\">\n                                <Link\n                                    href=\"/feed\"\n                                    className=\"text-surface-600 hover:text-primary-600 hover:bg-primary-50 px-4 py-2 rounded-xl transition-all font-medium\"\n                                >\n                                    Feed\n                                </Link>\n                                <Link\n                                    href=\"/notifications\"\n                                    className=\"text-surface-600 hover:text-primary-600 hover:bg-primary-50 px-4 py-2 rounded-xl transition-all font-medium relative\"\n                                >\n                                    Notifications\n                                    {unreadNotifications > 0 && (\n                                        <span className=\"absolute top-1.5 right-1 bg-red-500 text-white text-[10px] font-bold rounded-full h-4 min-w-[16px] px-1 flex items-center justify-center border-2 border-white\">\n                                            {unreadNotifications}\n                                        </span>\n                                    )}\n                                </Link>\n                                <Link\n                                    href=\"/messages\"\n                                    className=\"text-surface-600 hover:text-primary-600 hover:bg-primary-50 px-4 py-2 rounded-xl transition-all font-medium\"\n                                >\n                                    Messages\n                                </Link>\n                                <Link\n                                    href=\"/discover\"\n                                    className=\"text-surface-600 hover:text-primary-600 hover:bg-primary-50 px-4 py-2 rounded-xl transition-all font-medium\"\n                                >\n                                    Discover\n                                </Link>\n                            </nav>\n                        </div>\n\n\n                        <div className=\"flex items-center space-x-4\">\n                            <Link\n                                href={`/profile/${currentUser?.username}`}\n                                className=\"flex items-center space-x-2 text-surface-700 hover:text-primary-600 bg-surface-100/50 hover:bg-primary-50 px-3 py-1.5 rounded-full transition-all group\"\n                            >\n                                <div className=\"w-7 h-7 bg-primary-100 rounded-full flex items-center justify-center text-primary-600 font-bold text-xs\">\n                                    {currentUser?.username?.charAt(0).toUpperCase()}\n                                </div>\n                                <span className=\"font-semibold text-sm\">@{currentUser?.username}</span>\n                            </Link>\n                            <div className=\"h-6 w-px bg-surface-200\" />\n                            <button\n                                onClick={handleLogout}\n                                className=\"text-surface-400 hover:text-red-500 p-2 rounded-lg hover:bg-red-50 transition-all\"\n                                title=\"Logout\"\n                            >\n                                <span className=\"text-xl\">⏻</span>\n                            </button>\n                        </div>\n                    </div>\n                </div>\n            </header>\n\n            {/* Main Content */}\n            <main className=\"flex-grow max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 w-full\">\n                <div className=\"animate-in\">\n                    {children}\n                </div>\n            </main>\n        </div>\n    );\n}\n\n"],"names":[],"mappings":"AAAA,uBAAuB;;;;;;AAEvB;AACA;AACA;AACA;AACA;AALA;;;;;;;AAOe,SAAS,UAAU,EAAE,QAAQ,EAAiC;IACzE,MAAM,SAAS,IAAA,qKAAS;IACxB,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,uOAAQ,EAAC;IACvC,MAAM,CAAC,qBAAqB,uBAAuB,GAAG,IAAA,uOAAQ,EAAC;IAC/D,MAAM,cAAc,gJAAI,CAAC,OAAO;IAEhC,sDAAsD;IACtD,IAAA,wOAAS,EAAC;QACN,IAAI,CAAC,gJAAI,CAAC,eAAe,IAAI;YACzB,OAAO,OAAO,CAAC;QACnB,OAAO;YACH,WAAW;YACX;QACJ;IACJ,GAAG;QAAC;KAAO;IAEX,MAAM,kBAAkB;QACpB,IAAI;YACA,MAAM,MAAM,MAAM,kJAAG,CAAC,GAAG,CAAoB;YAC7C,uBAAuB,IAAI,IAAI,CAAC,KAAK;QACzC,EAAE,OAAO,OAAO;YACZ,QAAQ,KAAK,CAAC,gCAAgC;QAClD;IACJ;IAEA,MAAM,eAAe;QACjB,gJAAI,CAAC,YAAY;QACjB,OAAO,IAAI,CAAC;IAChB;IAEA,IAAI,CAAC,SAAS;QACV,qBACI,oQAAC;YAAI,WAAU;sBACX,cAAA,oQAAC;gBAAI,WAAU;0BAAgB;;;;;;;;;;;IAG3C;IAEA,qBACI,oQAAC;QAAI,WAAU;;0BAEX,oQAAC;gBAAO,WAAU;0BACd,cAAA,oQAAC;oBAAI,WAAU;8BACX,cAAA,oQAAC;wBAAI,WAAU;;0CACX,oQAAC;gCAAI,WAAU;;kDACX,oQAAC,6LAAI;wCAAC,MAAK;wCAAQ,WAAU;kDAA2F;;;;;;kDAIxH,oQAAC;wCAAI,WAAU;;0DACX,oQAAC,6LAAI;gDACD,MAAK;gDACL,WAAU;0DACb;;;;;;0DAGD,oQAAC,6LAAI;gDACD,MAAK;gDACL,WAAU;;oDACb;oDAEI,sBAAsB,mBACnB,oQAAC;wDAAK,WAAU;kEACX;;;;;;;;;;;;0DAIb,oQAAC,6LAAI;gDACD,MAAK;gDACL,WAAU;0DACb;;;;;;0DAGD,oQAAC,6LAAI;gDACD,MAAK;gDACL,WAAU;0DACb;;;;;;;;;;;;;;;;;;0CAOT,oQAAC;gCAAI,WAAU;;kDACX,oQAAC,6LAAI;wCACD,MAAM,CAAC,SAAS,EAAE,aAAa,UAAU;wCACzC,WAAU;;0DAEV,oQAAC;gDAAI,WAAU;0DACV,aAAa,UAAU,OAAO,GAAG;;;;;;0DAEtC,oQAAC;gDAAK,WAAU;;oDAAwB;oDAAE,aAAa;;;;;;;;;;;;;kDAE3D,oQAAC;wCAAI,WAAU;;;;;;kDACf,oQAAC;wCACG,SAAS;wCACT,WAAU;wCACV,OAAM;kDAEN,cAAA,oQAAC;4CAAK,WAAU;sDAAU;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;0BAQ9C,oQAAC;gBAAK,WAAU;0BACZ,cAAA,oQAAC;oBAAI,WAAU;8BACV;;;;;;;;;;;;;;;;;AAKrB"}}]
}